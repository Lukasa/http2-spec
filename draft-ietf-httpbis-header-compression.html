<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
   <head profile="http://dublincore.org/documents/2008/08/04/dc-html/">
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>HPACK - Header Compression for HTTP/2</title><script>
var buttonsAdded = false;

function initFeedback() {
  var fb = document.createElement("div");
  fb.className = "feedback noprint";
  fb.setAttribute("onclick", "feedback();");
  fb.appendChild(document.createTextNode("feedback"));

  var bodyl = document.getElementsByTagName("body");
  bodyl.item(0).appendChild(fb);
}

function feedback() {
  toggleButtonsToElementsByName("h1");
  toggleButtonsToElementsByName("h2");
  toggleButtonsToElementsByName("h3");
  toggleButtonsToElementsByName("h4");

  buttonsAdded = !buttonsAdded;
}

function toggleButtonsToElementsByName(name) {
  var list = document.getElementsByTagName(name);
  for (var i = 0; i < list.length; i++) {
    toggleButton(list.item(i));
  }
}

function toggleButton(node) {
  if (! buttonsAdded) {

    // docname
    var template = "mailto:ietf-http-wg@w3.org?subject={docname},%20%22{section}%22&body=<{ref}>:";

    var id = node.getAttribute("id");
    // better id available?
    var titlelinks = node.getElementsByTagName("a");
    for (var i = 0; i < titlelinks.length; i++) {
      var tl = titlelinks.item(i);
      if (tl.getAttribute("id")) {
        id = tl.getAttribute("id");
      }
    }

    // ref
    var ref = window.location.toString();
    var hash = ref.indexOf("#");
    if (hash != -1) {
      ref = ref.substring(0, hash);
    }
    if (id != "") {
      ref += "#" + id;
    }

    // docname
    var docname = "draft-ietf-httpbis-header-compression-latest";

    // section
    var section = node.textContent;
    section = section.replace("\u00a0", " ");

    // build URI from template
    var uri = template.replace("{docname}", encodeURIComponent(docname));
    uri = uri.replace("{section}", encodeURIComponent(section));
    uri = uri.replace("{ref}", encodeURIComponent(ref));

    var button = document.createElement("a");
    button.className = "fbbutton noprint";
    button.setAttribute("href", uri);
    button.appendChild(document.createTextNode("send feedback"));
    node.appendChild(button);
  }
  else {
    var buttons = node.getElementsByTagName("a");
    for (var i = 0; i < buttons.length; i++) {
      var b = buttons.item(i);
      if (b.className == "fbbutton noprint") {
        node.removeChild(b);
      }
    }
  }
}</script><style type="text/css" title="Xml2Rfc (sans serif)">
a {
  text-decoration: none;
}
a.smpl {
  color: black;
}
a:hover {
  text-decoration: underline;
}
a:active {
  text-decoration: underline;
}
address {
  margin-top: 1em;
  margin-left: 2em;
  font-style: normal;
}
body {
  color: black;
  font-family: cambria, helvetica, arial, sans-serif;
  font-size: 11pt;
  margin-right: 2em;
}
cite {
  font-style: normal;
}
dl {
  margin-left: 2em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}
dl p {
  margin-left: 0em;
}
dt {
  margin-top: .5em;
}
h1 {
  font-size: 130%;
  line-height: 21pt;
  page-break-after: avoid;
}
h1.np {
  page-break-before: always;
}
h2 {
  font-size: 120%;
  line-height: 15pt;
  page-break-after: avoid;
}
h3 {
  font-size: 110%;
  page-break-after: avoid;
}
h4, h5, h6 {
  page-break-after: avoid;
}
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
  color: black;
}
img {
  margin-left: 3em;
}
li {
  margin-left: 2em;
}
ol {
  margin-left: 2em;
}
ol.la {
  list-style-type: lower-alpha;
}
ol.ua {
  list-style-type: upper-alpha;
}
ol p {
  margin-left: 0em;
}
p {
  margin-left: 2em;
}
pre {
  margin-left: 3em;
  background-color: lightyellow;
  padding: .25em;
  page-break-inside: avoid;
}
pre.text2 {
  border-style: dotted;
  border-width: 1px;
  background-color: #f0f0f0;
  width: 69em;
}
pre.inline {
  background-color: white;
  padding: 0em;
}
pre.text {
  border-style: dotted;
  border-width: 1px;
  background-color: #f8f8f8;
  width: 69em;
}
pre.drawing {
  border-style: solid;
  border-width: 1px;
  background-color: #f8f8f8;
  padding: 2em;
}
sup {
  font-size: 60%;
}
table {
  margin-left: 2em;
}
table.tt {
  vertical-align: top;
  border-color: gray;
}
table.tt th {
  border-color: gray;
}
table.tt td {
  border-color: gray;
}
table.all {
  border-style: solid;
  border-width: 2px;
}
table.full {
  border-style: solid;
  border-width: 2px;
}
table.tt td {
  vertical-align: top;
}
table.all td {
  border-style: solid;
  border-width: 1px;
}
table.full td {
  border-style: none solid;
  border-width: 1px;
}
table.tt th {
  vertical-align: top;
}
table.all th {
  border-style: solid;
  border-width: 1px;
}
table.full th {
  border-style: solid;
  border-width: 1px 1px 2px 1px;
}
table.headers th {
  border-style: none none solid none;
  border-width: 2px;
}
table.left {
  margin-right: auto;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
caption {
  caption-side: bottom;
  font-weight: bold;
  font-size: 10pt;
  margin-top: .5em;
}

table.header {
  border-spacing: 1px;
  width: 95%;
  font-size: 11pt;
  color: white;
}
td.top {
  vertical-align: top;
}
td.topnowrap {
  vertical-align: top;
  white-space: nowrap;
}
table.header td {
  background-color: gray;
  width: 50%;
}
td.reference {
  vertical-align: top;
  white-space: nowrap;
  padding-right: 1em;
}
thead {
  display:table-header-group;
}
ul.toc, ul.toc ul {
  list-style: none;
  margin-left: 1.5em;
  padding-left: 0em;
}
ul.toc li {
  line-height: 150%;
  font-weight: bold;
  margin-left: 0em;
}
ul.toc li li {
  line-height: normal;
  font-weight: normal;
  font-size: 10pt;
  margin-left: 0em;
}
li.excluded {
  font-size: 0pt;
}
ul p {
  margin-left: 0em;
}
.title, .filename, h1, h2, h3, h4 {
  font-family: candara, helvetica, arial, sans-serif;
}
samp, tt, code, pre {
  font: consolas, monospace;
}

.comment {
  background-color: yellow;
}
.center {
  text-align: center;
}
.error {
  color: red;
  font-style: italic;
  font-weight: bold;
}
.figure {
  font-weight: bold;
  text-align: center;
  font-size: 10pt;
}
.filename {
  color: #333333;
  font-size: 75%;
  font-weight: bold;
  line-height: 21pt;
  text-align: center;
}
.fn {
  font-weight: bold;
}
.left {
  text-align: left;
}
.right {
  text-align: right;
}
.title {
  color: green;
  font-size: 150%;
  line-height: 18pt;
  font-weight: bold;
  text-align: center;
  margin-top: 36pt;
}
.warning {
  font-size: 130%;
  background-color: yellow;
}
.feedback {
  position: fixed;
  bottom: 1%;
  right: 1%;
  padding: 3px 5px;
  color: white;
  border-radius: 5px;
  background: #a00000;
  border: 1px solid silver;
}
.fbbutton {
  margin-left: 1em;
  color: #303030;
  font-size: small;
  font-weight: normal;
  background: #d0d000;
  padding: 1px 4px;
  border: 1px solid silver;
  border-radius: 5px;
}

@media print {
  .noprint {
    display: none;
  }

  a {
    color: black;
    text-decoration: none;
  }

  table.header {
    width: 90%;
  }

  td.header {
    width: 50%;
    color: black;
    background-color: white;
    vertical-align: top;
    font-size: 110%;
  }

  ul.toc a:nth-child(2)::after {
    content: leader('.') target-counter(attr(href), page);
  }

  ul.ind li li a {
    content: target-counter(attr(href), page);
  }

  .print2col {
    column-count: 2;
    -moz-column-count: 2;
    column-fill: auto;
  }
}

@page {
  @top-left {
       content: "Internet-Draft";
  }
  @top-right {
       content: "June 2014";
  }
  @top-center {
       content: "HPACK";
  }
  @bottom-left {
       content: "Peon & Ruellan";
  }
  @bottom-center {
       content: "Expires December 19, 2014";
  }
  @bottom-right {
       content: "[Page " counter(page) "]";
  }
}

@page:first {
    @top-left {
      content: normal;
    }
    @top-right {
      content: normal;
    }
    @top-center {
      content: normal;
    }
}
</style><link rel="Contents" href="#rfc.toc">
  <style type="text/css">
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}

@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

body {
  font: 11pt cambria, helvetica, arial, sans-serif;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 1em auto;
  max-width: 700px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: candara, helvetica, arial, sans-serif;
  font-size-adjust: 0.5;
}
.title { font-size: 150%; }
h1 { font-size: 130%; }
h2 { font-size: 120%; }
h3, h4 { font-size: 110%; }
ul.toc >li { font-size: 95%; }
ul.toc >li >ul, .figure, caption { font-size: 90%; }

table {
  margin-left: 0em;
}
table.header {
  width: 100%;
}

table.header td {
  background-color: inherit;
  color: black;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}

pre.text, pre.text2 {
  width: 90%;
}

dt {
  float: left; clear: left;
  margin: 0.5em 0.5em 0 0;
}
dt:first-child {
  margin-top: 0;
}
dd {
  margin: 0.5em 0 0 2em;
}
dd p, dd ul {
  margin-top: 0; margin-bottom: 0;
}
dd *+p {
  margin-top: 0.5em;
}

ol, ul {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
ul.toc, ul.toc ul { 
  margin: 0 0 0 1.5em;
}
ul.toc a:first-child { 
  display: inline-block; 
  min-width: 1.2em;
}  </style>
      <link rel="Author" href="#rfc.authors">
      <link rel="Copyright" href="#rfc.copyrightnotice">
      <link rel="Chapter" title="1 Introduction" href="#rfc.section.1">
      <link rel="Chapter" title="2 HPACK Overview" href="#rfc.section.2">
      <link rel="Chapter" title="3 Decoding Process Overview" href="#rfc.section.3">
      <link rel="Chapter" title="4 Header Block Decoding" href="#rfc.section.4">
      <link rel="Chapter" title="5 Header Table Management" href="#rfc.section.5">
      <link rel="Chapter" title="6 Primitive Type Representations" href="#rfc.section.6">
      <link rel="Chapter" title="7 Binary Format" href="#rfc.section.7">
      <link rel="Chapter" title="8 Security Considerations" href="#rfc.section.8">
      <link rel="Chapter" title="9 Acknowledgements" href="#rfc.section.9">
      <link rel="Chapter" href="#rfc.section.10" title="10 References">
      <link rel="Appendix" title="A Change Log (to be removed by RFC Editor before publication" href="#rfc.section.A">
      <link rel="Appendix" title="B Static Table" href="#rfc.section.B">
      <link rel="Appendix" title="C Huffman Code" href="#rfc.section.C">
      <link rel="Appendix" title="D Examples" href="#rfc.section.D">
      <meta name="generator" content="http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.638, 2014/05/31 12:29:37, XSLT vendor: SAXON 9.1.0.8 from Saxonica http://www.saxonica.com/">
      <meta name="keywords" content="HTTP, Header">
      <link rel="schema.dct" href="http://purl.org/dc/terms/">
      <meta name="dct.creator" content="Peon, R.">
      <meta name="dct.creator" content="Ruellan, H.">
      <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-httpbis-header-compression-latest">
      <meta name="dct.issued" scheme="ISO8601" content="2014-06-17">
      <meta name="dct.abstract" content="This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2.">
      <meta name="description" content="This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2.">
   </head>
   <body onload="initFeedback();">
      <table class="header">
         <tbody>
            <tr>
               <td class="left">HTTPbis Working Group</td>
               <td class="right">R. Peon</td>
            </tr>
            <tr>
               <td class="left">Internet-Draft</td>
               <td class="right">Google, Inc</td>
            </tr>
            <tr>
               <td class="left">Intended status: Standards Track</td>
               <td class="right">H. Ruellan</td>
            </tr>
            <tr>
               <td class="left">Expires: December 19, 2014</td>
               <td class="right">Canon CRF</td>
            </tr>
            <tr>
               <td class="left"></td>
               <td class="right">June 17, 2014</td>
            </tr>
         </tbody>
      </table>
      <p class="title">HPACK - Header Compression for HTTP/2<br><span class="filename">draft-ietf-httpbis-header-compression-latest</span></p>
      <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
      <p>This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2.</p>
      <h1 id="rfc.note.1"><a href="#rfc.note.1">Editorial Note (To be removed by RFC Editor)</a></h1>
      <p>Discussion of this draft takes place on the HTTPBIS working group mailing list (ietf-http-wg@w3.org), which is archived at &lt;<a href="https://lists.w3.org/Archives/Public/ietf-http-wg/">https://lists.w3.org/Archives/Public/ietf-http-wg/</a>&gt;.
      </p>
      <p>Working Group information can be found at &lt;<a href="http://tools.ietf.org/wg/httpbis/">http://tools.ietf.org/wg/httpbis/</a>&gt;; that specific to HTTP/2 are at &lt;<a href="http://http2.github.io/">http://http2.github.io/</a>&gt;.
      </p>
      <p>The changes in this draft are summarized in <a href="#changes.since.draft-ietf-httpbis-header-compression-07" title="Since draft-ietf-httpbis-header-compression-07">Appendix&nbsp;A.1</a>.
      </p>
      <div id="rfc.status">
         <h1><a href="#rfc.status">Status of This Memo</a></h1>
         <p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
         <p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF). Note that other groups may also distribute
            working documents as Internet-Drafts. The list of current Internet-Drafts is at <a href="http://datatracker.ietf.org/drafts/current/">http://datatracker.ietf.org/drafts/current/</a>.
         </p>
         <p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other
            documents at any time. It is inappropriate to use Internet-Drafts as reference material or to cite them other than as “work
            in progress”.
         </p>
         <p>This Internet-Draft will expire on December 19, 2014.</p>
      </div>
      <div id="rfc.copyrightnotice">
         <h1><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
         <p>Copyright © 2014 IETF Trust and the persons identified as the document authors. All rights reserved.</p>
         <p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (<a href="http://trustee.ietf.org/license-info">http://trustee.ietf.org/license-info</a>) in effect on the date of publication of this document. Please review these documents carefully, as they describe your rights
            and restrictions with respect to this document. Code Components extracted from this document must include Simplified BSD License
            text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified
            BSD License.
         </p>
      </div>
      <hr class="noprint">
      <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
      <ul class="toc">
         <li><a href="#rfc.section.1">1.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.1">Introduction</a></li>
         <li><a href="#rfc.section.2">2.</a>&nbsp;&nbsp;&nbsp;<a href="#overview">HPACK Overview</a><ul>
               <li><a href="#rfc.section.2.1">2.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.2.1">Outline</a></li>
               <li><a href="#rfc.section.2.2">2.2</a>&nbsp;&nbsp;&nbsp;<a href="#conventions">Conventions</a></li>
               <li><a href="#rfc.section.2.3">2.3</a>&nbsp;&nbsp;&nbsp;<a href="#encoding.concepts">Terminology</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.3">3.</a>&nbsp;&nbsp;&nbsp;<a href="#header.encoding">Decoding Process Overview</a><ul>
               <li><a href="#rfc.section.3.1">3.1</a>&nbsp;&nbsp;&nbsp;<a href="#encoding.context">Encoding and Decoding Contexts</a></li>
               <li><a href="#rfc.section.3.2">3.2</a>&nbsp;&nbsp;&nbsp;<a href="#header.table">Header Table</a></li>
               <li><a href="#rfc.section.3.3">3.3</a>&nbsp;&nbsp;&nbsp;<a href="#reference.set">Reference Set</a></li>
               <li><a href="#rfc.section.3.4">3.4</a>&nbsp;&nbsp;&nbsp;<a href="#header.representation">Header Field Representation</a></li>
               <li><a href="#rfc.section.3.5">3.5</a>&nbsp;&nbsp;&nbsp;<a href="#header.emission">Header Field Emission</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.4">4.</a>&nbsp;&nbsp;&nbsp;<a href="#header.block.decoding">Header Block Decoding</a><ul>
               <li><a href="#rfc.section.4.1">4.1</a>&nbsp;&nbsp;&nbsp;<a href="#header.representation.processing">Header Field Representation Processing</a></li>
               <li><a href="#rfc.section.4.2">4.2</a>&nbsp;&nbsp;&nbsp;<a href="#reference.set.emission">Reference Set Emission</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.5">5.</a>&nbsp;&nbsp;&nbsp;<a href="#header.table.management">Header Table Management</a><ul>
               <li><a href="#rfc.section.5.1">5.1</a>&nbsp;&nbsp;&nbsp;<a href="#maximum.table.size">Maximum Table Size</a></li>
               <li><a href="#rfc.section.5.2">5.2</a>&nbsp;&nbsp;&nbsp;<a href="#entry.eviction">Entry Eviction When Header Table Size Changes</a></li>
               <li><a href="#rfc.section.5.3">5.3</a>&nbsp;&nbsp;&nbsp;<a href="#entry.addition">Entry Eviction when Adding New Entries</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.6">6.</a>&nbsp;&nbsp;&nbsp;<a href="#low-level.representation">Primitive Type Representations</a><ul>
               <li><a href="#rfc.section.6.1">6.1</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation">Integer representation</a></li>
               <li><a href="#rfc.section.6.2">6.2</a>&nbsp;&nbsp;&nbsp;<a href="#string.literal.representation">String Literal Representation</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.7">7.</a>&nbsp;&nbsp;&nbsp;<a href="#detailed.format">Binary Format</a><ul>
               <li><a href="#rfc.section.7.1">7.1</a>&nbsp;&nbsp;&nbsp;<a href="#indexed.header.representation">Indexed Header Field Representation</a></li>
               <li><a href="#rfc.section.7.2">7.2</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.representation">Literal Header Field Representation</a><ul>
                     <li><a href="#rfc.section.7.2.1">7.2.1</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.with.incremental.indexing">Literal Header Field with Incremental Indexing</a></li>
                     <li><a href="#rfc.section.7.2.2">7.2.2</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.without.indexing">Literal Header Field without Indexing</a></li>
                     <li><a href="#rfc.section.7.2.3">7.2.3</a>&nbsp;&nbsp;&nbsp;<a href="#literal.header.never.indexed">Literal Header Field Never Indexed</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.7.3">7.3</a>&nbsp;&nbsp;&nbsp;<a href="#encoding.context.update">Encoding Context Update</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.8">8.</a>&nbsp;&nbsp;&nbsp;<a href="#Security">Security Considerations</a><ul>
               <li><a href="#rfc.section.8.1">8.1</a>&nbsp;&nbsp;&nbsp;<a href="#compression.based.attacks">Probing Header Table State</a><ul>
                     <li><a href="#rfc.section.8.1.1">8.1.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8.1.1">Applicability to HPACK and HTTP</a></li>
                     <li><a href="#rfc.section.8.1.2">8.1.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8.1.2">Mitigation</a></li>
                     <li><a href="#rfc.section.8.1.3">8.1.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8.1.3">Never Indexed Literals</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.8.2">8.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8.2">Static Huffman Encoding</a></li>
               <li><a href="#rfc.section.8.3">8.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8.3">Memory Consumption</a></li>
               <li><a href="#rfc.section.8.4">8.4</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.8.4">Implementation Limits</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.9">9.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.9">Acknowledgements</a></li>
         <li><a href="#rfc.section.10">10.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references">References</a><ul>
               <li><a href="#rfc.section.10.1">10.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.1">Normative References</a></li>
               <li><a href="#rfc.section.10.2">10.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.references.2">Informative References</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.A">A.</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A">Change Log (to be removed by RFC Editor before publication</a><ul>
               <li><a href="#rfc.section.A.1">A.1</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-07">Since draft-ietf-httpbis-header-compression-07</a></li>
               <li><a href="#rfc.section.A.2">A.2</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-06">Since draft-ietf-httpbis-header-compression-06</a></li>
               <li><a href="#rfc.section.A.3">A.3</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-05">Since draft-ietf-httpbis-header-compression-05</a></li>
               <li><a href="#rfc.section.A.4">A.4</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-04">Since draft-ietf-httpbis-header-compression-04</a></li>
               <li><a href="#rfc.section.A.5">A.5</a>&nbsp;&nbsp;&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-03">Since draft-ietf-httpbis-header-compression-03</a></li>
               <li><a href="#rfc.section.A.6">A.6</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A.6">Since draft-ietf-httpbis-header-compression-02</a></li>
               <li><a href="#rfc.section.A.7">A.7</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A.7">Since draft-ietf-httpbis-header-compression-01</a></li>
               <li><a href="#rfc.section.A.8">A.8</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.A.8">Since draft-ietf-httpbis-header-compression-00</a></li>
            </ul>
         </li>
         <li><a href="#rfc.section.B">B.</a>&nbsp;&nbsp;&nbsp;<a href="#static.table">Static Table</a></li>
         <li><a href="#rfc.section.C">C.</a>&nbsp;&nbsp;&nbsp;<a href="#huffman.code">Huffman Code</a></li>
         <li><a href="#rfc.section.D">D.</a>&nbsp;&nbsp;&nbsp;<a href="#examples">Examples</a><ul>
               <li><a href="#rfc.section.D.1">D.1</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.examples">Integer Representation Examples</a><ul>
                     <li><a href="#rfc.section.D.1.1">D.1.1</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.example1">Example 1: Encoding 10 Using a 5-bit Prefix</a></li>
                     <li><a href="#rfc.section.D.1.2">D.1.2</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.example2">Example 2: Encoding 1337 Using a 5-bit Prefix</a></li>
                     <li><a href="#rfc.section.D.1.3">D.1.3</a>&nbsp;&nbsp;&nbsp;<a href="#integer.representation.example3">Example 3: Encoding 42 Starting at an Octet Boundary</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.2">D.2</a>&nbsp;&nbsp;&nbsp;<a href="#header.field.representation.examples">Header Field Representation Examples</a><ul>
                     <li><a href="#rfc.section.D.2.1">D.2.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.1">Literal Header Field with Indexing</a></li>
                     <li><a href="#rfc.section.D.2.2">D.2.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.2">Literal Header Field without Indexing</a></li>
                     <li><a href="#rfc.section.D.2.3">D.2.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.3">Literal Header Field never Indexed</a></li>
                     <li><a href="#rfc.section.D.2.4">D.2.4</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.4">Indexed Header Field</a></li>
                     <li><a href="#rfc.section.D.2.5">D.2.5</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.2.5">Indexed Header Field from Static Table</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.3">D.3</a>&nbsp;&nbsp;&nbsp;<a href="#request.examples.without.huffman.coding">Request Examples without Huffman Coding</a><ul>
                     <li><a href="#rfc.section.D.3.1">D.3.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.3.1">First Request</a></li>
                     <li><a href="#rfc.section.D.3.2">D.3.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.3.2">Second Request</a></li>
                     <li><a href="#rfc.section.D.3.3">D.3.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.3.3">Third Request</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.4">D.4</a>&nbsp;&nbsp;&nbsp;<a href="#request.examples.with.huffman.coding">Request Examples with Huffman Coding</a><ul>
                     <li><a href="#rfc.section.D.4.1">D.4.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.4.1">First Request</a></li>
                     <li><a href="#rfc.section.D.4.2">D.4.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.4.2">Second Request</a></li>
                     <li><a href="#rfc.section.D.4.3">D.4.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.4.3">Third Request</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.5">D.5</a>&nbsp;&nbsp;&nbsp;<a href="#response.examples.without.huffman.coding">Response Examples without Huffman Coding</a><ul>
                     <li><a href="#rfc.section.D.5.1">D.5.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.5.1">First Response</a></li>
                     <li><a href="#rfc.section.D.5.2">D.5.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.5.2">Second Response</a></li>
                     <li><a href="#rfc.section.D.5.3">D.5.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.5.3">Third Response</a></li>
                  </ul>
               </li>
               <li><a href="#rfc.section.D.6">D.6</a>&nbsp;&nbsp;&nbsp;<a href="#response.examples.with.huffman.coding">Response Examples with Huffman Coding</a><ul>
                     <li><a href="#rfc.section.D.6.1">D.6.1</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.6.1">First Response</a></li>
                     <li><a href="#rfc.section.D.6.2">D.6.2</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.6.2">Second Response</a></li>
                     <li><a href="#rfc.section.D.6.3">D.6.3</a>&nbsp;&nbsp;&nbsp;<a href="#rfc.section.D.6.3">Third Response</a></li>
                  </ul>
               </li>
            </ul>
         </li>
         <li><a href="#rfc.authors">Authors' Addresses</a></li>
      </ul>
      <ul class="toc">
         <li>Figures
            
            <ul>
               <li><a href="#rfc.figure.1">Figure 1: Index Address Space</a></li>
               <li><a href="#rfc.figure.2">Figure 2: String Literal Representation</a></li>
               <li><a href="#rfc.figure.3">Figure 3: Indexed Header Field</a></li>
               <li><a href="#rfc.figure.4">Figure 4: Literal Header Field with Incremental Indexing -                         Indexed Name</a></li>
               <li><a href="#rfc.figure.5">Figure 5: Literal Header Field with Incremental Indexing -                         New Name</a></li>
               <li><a href="#rfc.figure.6">Figure 6: Literal Header Field without Indexing - Indexed Name</a></li>
               <li><a href="#rfc.figure.7">Figure 7: Literal Header Field without Indexing - New Name</a></li>
               <li><a href="#rfc.figure.8">Figure 8: Literal Header Field Never Indexed - Indexed Name</a></li>
               <li><a href="#rfc.figure.9">Figure 9: Literal Header Field Never Indexed - New Name</a></li>
               <li><a href="#rfc.figure.10">Figure 10: Context Update</a></li>
               <li><a href="#rfc.figure.11">Figure 11: Reference Set Emptying</a></li>
               <li><a href="#rfc.figure.12">Figure 12: Maximum Header Table Size Change</a></li>
            </ul>
         </li>
      </ul>
      <div>
         <h1 id="rfc.section.1" class="np"><a href="#rfc.section.1">1.</a>&nbsp;Introduction
         </h1>
         <p id="rfc.section.1.p.1">This specification defines HPACK, a compression format for efficiently representing HTTP header fields in the context of HTTP/2
            (see <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>).
         </p>
      </div>
      <div id="overview">
         <h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a>&nbsp;<a href="#overview">HPACK Overview</a></h1>
         <p id="rfc.section.2.p.1">In HTTP/1.1 (see <a href="#RFC7230"><cite title="Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing">[RFC7230]</cite></a>), header fields are encoded without any form of compression. As web pages have grown to include dozens to hundreds of requests,
            the redundant header fields in these requests now measurably increase latency and unnecessarily consume bandwidth (see <a href="#SPDY-DESC-1"><cite title="IETF83: SPDY and What to Consider for HTTP/2.0">[SPDY-DESC-1]</cite></a> and <a href="#SPDY-DESC-2"><cite title="SPDY: What I Like About You">[SPDY-DESC-2]</cite></a>).
         </p>
         <p id="rfc.section.2.p.2">SPDY <a href="#SPDY"><cite title="SPDY Protocol">[SPDY]</cite></a> initially addressed this redundancy by compressing header fields using the DEFLATE format <a href="#DEFLATE"><cite title="DEFLATE Compressed Data Format Specification version 1.3">[DEFLATE]</cite></a>, which proved very effective at efficiently representing the redundant header fields. However, that approach exposed a security
            risk as demonstrated by the CRIME attack (see <a href="#CRIME"><cite title="The CRIME Attack">[CRIME]</cite></a>).
         </p>
         <p id="rfc.section.2.p.3">This document describes HPACK, a new compressor for header fields which eliminates redundant header fields, limits vulnerability
            to known security attacks, and which has a bounded memory requirement for use in constrained environments.
         </p>
         <div>
            <h2 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1</a>&nbsp;Outline
            </h2>
            <p id="rfc.section.2.1.p.1">The HTTP header field encoding defined in this document is based on a header table that maps name-value pairs to index values.
               The header table is incrementally updated as new values are encoded or decoded.
            </p>
            <p id="rfc.section.2.1.p.2">A set of header fields is treated as an unordered collection of name-value pairs that can include duplicates. Names and values
               are considered to be opaque sequences of octets. The order of header fields is not guaranteed to be preserved after being
               compressed and decompressed.
            </p>
            <p id="rfc.section.2.1.p.3">In the encoded form, a header field is represented either literally or as a reference to a name-value pair in a header table.
               A set of header fields can therefore be encoded using a mixture of references and literal values.
            </p>
            <p id="rfc.section.2.1.p.4">As two consecutive sets of header fields often have header fields in common, each set is coded as a difference from the previous
               set. The goal is to only encode the changes between the two sets of header fields (that is, header fields that are present
               in only one of the sets) and eliminate redundancy (header fields present in both sets).
            </p>
            <p id="rfc.section.2.1.p.5">A subset of the header fields that are encoded as references to the header table are maintained in a reference set that is
               used as the initial set of header fields for the next encoding.
            </p>
            <p id="rfc.section.2.1.p.6">The encoder is responsible for deciding which header fields to insert as new entries in the header table. The decoder executes
               the modifications to the header table and reference set prescribed by the encoder, reconstructing the set of header fields
               in the process. This enables decoders to remain simple and understand a wide variety of encoders.
            </p>
            <p id="rfc.section.2.1.p.7">Examples illustrating the use of these different mechanisms to represent header fields are available in <a href="#examples" title="Examples">Appendix&nbsp;D</a>.
            </p>
         </div>
         <div id="conventions">
            <h2 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2</a>&nbsp;<a href="#conventions">Conventions</a></h2>
            <p id="rfc.section.2.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
               in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</cite>.
            </p>
            <p id="rfc.section.2.2.p.2">All numeric values are in network byte order. Values are unsigned unless otherwise indicated. Literal values are provided
               in decimal or hexadecimal as appropriate. Hexadecimal literals are prefixed with <samp>0x</samp> to distinguish them from decimal literals.
            </p>
         </div>
         <div id="encoding.concepts">
            <h2 id="rfc.section.2.3"><a href="#rfc.section.2.3">2.3</a>&nbsp;<a href="#encoding.concepts">Terminology</a></h2>
            <p id="rfc.section.2.3.p.1">This document uses the following terms: </p>
            <dl>
               <dt>Header Field:</dt>
               <dd>A name-value pair. Both the name and value are treated as opaque sequences of octets.</dd>
               <dt>Header Table:</dt>
               <dd>The header table (see <a href="#header.table" title="Header Table">Section&nbsp;3.2</a>) is a component used to associate stored header fields to index values.
               </dd>
               <dt>Static Table:</dt>
               <dd>The static table (see <a href="#static.table" title="Static Table">Appendix&nbsp;B</a>) is a component used to associate static header fields to index values. This data is ordered, read-only, always accessible,
                  and may be shared amongst all encoding contexts.
               </dd>
               <dt>Header Set:</dt>
               <dd>A header set is an unordered group of header fields that are encoded jointly. It can contain duplicate header fields. A complete
                  set of key-value pairs contained in a HTTP request or response is a header set.
               </dd>
               <dt>Reference Set:</dt>
               <dd>The reference set (see <a href="#reference.set" title="Reference Set">Section&nbsp;3.3</a>) is a component containing an unordered set of references to entries in the header table. It doesn't contain duplicate references.
                  The reference set is used for the differential encoding of a new header set.
               </dd>
               <dt>Header Field Representation:</dt>
               <dd>A header field can be represented in encoded form either as a literal or as an index (see <a href="#header.representation" title="Header Field Representation">Section&nbsp;3.4</a>).
               </dd>
               <dt>Header Block:</dt>
               <dd>The entire set of encoded header field representations which, when decoded, yield a complete header set.</dd>
               <dt>Header Field Emission:</dt>
               <dd>When decoding a set of header field representations, some operations emit a header field (see <a href="#header.emission" title="Header Field Emission">Section&nbsp;3.5</a>). Emitted header fields are added to the output header set and cannot be removed.
               </dd>
            </dl>
         </div>
      </div>
      <div id="header.encoding">
         <h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a>&nbsp;<a href="#header.encoding">Decoding Process Overview</a></h1>
         <p id="rfc.section.3.p.1">This specification does not describe a specific algorithm for an encoder. Instead, it defines precisely how a decoder is expected
            to operate, allowing encoders to produce any encoding that this definition permits.
         </p>
         <div id="encoding.context">
            <h2 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1</a>&nbsp;<a href="#encoding.context">Encoding and Decoding Contexts</a></h2>
            <p id="rfc.section.3.1.p.1">HPACK requires that a decoder maintains both a header table and a reference set. No other state information is needed to decode
               messages. An encoder that wishes to reference entries in the header table, reference set, or static table needs to maintain
               a copy of the information a decoder holds.
            </p>
            <p id="rfc.section.3.1.p.2">When used for bidirectional communication, such as in HTTP, the encoding and decoding contexts maintained by an endpoint are
               completely independent. Header fields are encoded without any reference to the local decoding state; and header fields are
               decoded without reference to the encoding state.
            </p>
            <p id="rfc.section.3.1.p.3">Each endpoint maintains a header table and a reference set in order to decode header blocks, and optionally a copy of the
               information maintained by their peer.
            </p>
         </div>
         <div id="header.table">
            <h2 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2</a>&nbsp;<a href="#header.table">Header Table</a></h2>
            <p id="rfc.section.3.2.p.1">A header table consists of a list of header fields maintained in first-in, first-out order. The first and newest entry in
               a header table is always at index 1, and the oldest entry of a header table is at the index corresponding to the number of
               entries in the header table.
            </p>
            <p id="rfc.section.3.2.p.2">The header table is initially empty.</p>
            <p id="rfc.section.3.2.p.3">The header table can contain duplicate entries. Therefore, duplicate entries MUST NOT be treated as an error by a decoder.</p>
            <p id="rfc.section.3.2.p.4">The encoder decides how to update the header table and as such can control how much memory is used by the header table. To
               limit the memory requirements of the decoder, the header table size is strictly bounded (see <a href="#maximum.table.size" title="Maximum Table Size">Section&nbsp;5.1</a>).
            </p>
            <p id="rfc.section.3.2.p.5">The header table is updated during the processing of a set of header field representations (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;4.1</a>).
            </p>
         </div>
         <div id="reference.set">
            <h2 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3</a>&nbsp;<a href="#reference.set">Reference Set</a></h2>
            <p id="rfc.section.3.3.p.1">A reference set is an unordered set of references to entries of the header table. It never contains duplicate references.</p>
            <p id="rfc.section.3.3.p.2">The reference set is initially empty.</p>
            <p id="rfc.section.3.3.p.3">The reference set is updated during the processing of a set of header field representations (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;4.1</a>).
            </p>
            <p id="rfc.section.3.3.p.4">The reference set enables differential encoding, where only differences between the previous header set and the current header
               set need to be encoded. The use of differential encoding is optional for any header set.
            </p>
            <p id="rfc.section.3.3.p.5">When an entry is evicted from the header table, if it was referenced from the reference set, its reference is removed from
               the reference set.
            </p>
            <p id="rfc.section.3.3.p.6">To limit the memory requirements on the decoder side for handling the reference set, only entries within the header table
               can be contained in the reference set. To still allow entries from the static table to take advantage of the differential
               encoding, when a header field is represented as a reference to an entry of the static table, this entry is inserted into the
               header table (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;4.1</a>).
            </p>
         </div>
         <div id="header.representation">
            <h2 id="rfc.section.3.4"><a href="#rfc.section.3.4">3.4</a>&nbsp;<a href="#header.representation">Header Field Representation</a></h2>
            <p id="rfc.section.3.4.p.1">An encoded header field can be represented either as a literal or as an index.</p>
            <p id="rfc.section.3.4.p.2">A literal representation defines a new header field. The header field name can be represented literally or as a reference
               to an entry of the header table. The header field value is represented literally.
            </p>
            <p id="rfc.section.3.4.p.3">Three different literal representations are provided: </p>
            <ul>
               <li>A literal representation that does not add the header field to the header table (see <a href="#literal.header.without.indexing" title="Literal Header Field without Indexing">Section&nbsp;7.2.2</a>).
               </li>
               <li>A literal representation that does not add the header field to the header table, with the additional stipulation that this
                  header field always use a literal representation, in particular when re-encoded by an intermediary (see <a href="#literal.header.never.indexed" title="Literal Header Field Never Indexed">Section&nbsp;7.2.3</a>).
               </li>
               <li>A literal representation that adds the header field as a new entry at the beginning of the header table (see <a href="#literal.header.with.incremental.indexing" title="Literal Header Field with Incremental Indexing">Section&nbsp;7.2.1</a>).
               </li>
            </ul>
            <p id="rfc.section.3.4.p.4">An indexed representation defines a header field as a reference to an entry in either the header table or the static table
               (see <a href="#indexed.header.representation" title="Indexed Header Field Representation">Section&nbsp;7.1</a>).
            </p>
            <p id="rfc.section.3.4.p.5">Indices between 1 and the length of the header table (inclusive) refer to elements in the header table, with index 1 referring
               to the beginning of the table.
            </p>
            <p id="rfc.section.3.4.p.6">Indices between one higher than the length of the header table represent indexes into the static table. The length of the
               header table is subtracted to find the index into the static table.
            </p>
            <p id="rfc.section.3.4.p.7">Indices that are greater than the sum of the lengths of both tables MUST be treated as a decoding error.</p>
            <p id="rfc.section.3.4.p.8">An indexed representation using an entry of the static table induces a copy of this entry into the header table (see <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;4.1</a>) for bounding memory requirements on the decoder side (see <a href="#maximum.table.size" title="Maximum Table Size">Section&nbsp;5.1</a>). For this reason, the header table is accessed more frequently than the static table and has the lower indices.
            </p>
            <div id="rfc.figure.u.1"></div>
            <p>For a header table size of k and a static table size of s, the following diagram shows the entire valid index address space.</p><pre class="drawing">        &lt;----------  Index Address Space ----------&gt;
        &lt;-- Header  Table --&gt;  &lt;-- Static  Table --&gt;
        +---+-----------+---+  +---+-----------+---+
        | 1 |    ...    | k |  |k+1|    ...    |k+s|
        +---+-----------+---+  +---+-----------+---+
        ^                   |
        |                   V
 Insertion Point      Dropping Point
</pre><p class="figure">Index Address Space</p>
         </div>
         <div id="header.emission">
            <h2 id="rfc.section.3.5"><a href="#rfc.section.3.5">3.5</a>&nbsp;<a href="#header.emission">Header Field Emission</a></h2>
            <p id="rfc.section.3.5.p.1">A decoder processes an encoded header block sequentially. As different instructions are processed, some might specify that
               a header field is emitted.
            </p>
            <p id="rfc.section.3.5.p.2">The emission of a header field is the process of marking a header field as belonging to the output header set. Once a header
               has been emitted, it cannot be removed or retracted from the decoder output.
            </p>
            <p id="rfc.section.3.5.p.3">An emitted header field can be safely passed to the upper processing layer as part of the current header set. The decoder
               can pass emitted header fields to the upper processing layer in any order.
            </p>
            <p id="rfc.section.3.5.p.4">By emitting header fields instead of emitting header sets, a decoder can be implemented with minimal memory commitment in
               addition to the header table and the reference set. The management of memory for handling very large sets of header fields
               can therefore be deferred to the upper processing layers.
            </p>
         </div>
      </div>
      <div id="header.block.decoding">
         <h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a>&nbsp;<a href="#header.block.decoding">Header Block Decoding</a></h1>
         <p id="rfc.section.4.p.1">The processing of a header block to obtain a header set is defined in this section. To ensure that the decoding will successfully
            produce a header set, a decoder MUST obey the following rules.
         </p>
         <div id="header.representation.processing">
            <h2 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1</a>&nbsp;<a href="#header.representation.processing">Header Field Representation Processing</a></h2>
            <p id="rfc.section.4.1.p.1">All the header field representations contained in a header block are processed in the order in which they appear, as specified
               below. Details on the formatting of the various header field representations, and some additional processing instructions
               are found in <a href="#detailed.format" title="Binary Format">Section&nbsp;7</a>.
            </p>
            <p id="rfc.section.4.1.p.2">An <em>indexed representation</em> corresponding to an entry <em>present</em> in the reference set entails the following actions: 
            </p>
            <ul>
               <li>The entry is removed from the reference set.</li>
            </ul>
            <p id="rfc.section.4.1.p.3">An <em>indexed representation</em> corresponding to an entry <em>not present</em> in the reference set entails the following actions: 
            </p>
            <ul>
               <li>If referencing an element of the static table: 
                  <ul>
                     <li>The header field corresponding to the referenced entry is emitted.</li>
                     <li>The referenced static entry is inserted at the beginning of the header table.</li>
                     <li>A reference to this new header table entry is added to the reference set, unless this new entry didn't fit in the header table.</li>
                  </ul> 
               </li>
               <li>If referencing an element of the header table: 
                  <ul>
                     <li>The header field corresponding to the referenced entry is emitted.</li>
                     <li>The referenced header table entry is added to the reference set.</li>
                  </ul> 
               </li>
            </ul>
            <p id="rfc.section.4.1.p.4">A <em>literal representation</em> that is <em>not added</em> to the header table entails the following action: 
            </p>
            <ul>
               <li>The header field is emitted.</li>
            </ul>
            <p id="rfc.section.4.1.p.5">A <em>literal representation</em> that is <em>added</em> to the header table entails the following actions: 
            </p>
            <ul>
               <li>The header field is emitted.</li>
               <li>The header field is inserted at the beginning of the header table.</li>
               <li>A reference to the new entry is added to the reference set, unless this new entry didn't fit in the header table.</li>
            </ul>
         </div>
         <div id="reference.set.emission">
            <h2 id="rfc.section.4.2"><a href="#rfc.section.4.2">4.2</a>&nbsp;<a href="#reference.set.emission">Reference Set Emission</a></h2>
            <p id="rfc.section.4.2.p.1">Once all the representations contained in a header block have been processed, any header fields included in the reference
               set that have not previously been emitted during the processing of this header block are emitted.
            </p>
            <p id="rfc.section.4.2.p.2">After the emission of these remaining header fields, the header set is complete.</p>
         </div>
      </div>
      <div id="header.table.management">
         <h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a>&nbsp;<a href="#header.table.management">Header Table Management</a></h1>
         <div id="maximum.table.size">
            <h2 id="rfc.section.5.1"><a href="#rfc.section.5.1">5.1</a>&nbsp;<a href="#maximum.table.size">Maximum Table Size</a></h2>
            <p id="rfc.section.5.1.p.1">To limit the memory requirements on the decoder side, the mutable structures used in an encoding context are constrained in
               size. These mutable structures are the header table and the reference set.
            </p>
            <p id="rfc.section.5.1.p.2">The size of the header table is bounded by a maximum size defined by the decoder. The size of the header table MUST always
               be lower than or equal to this maximum size.
            </p>
            <p id="rfc.section.5.1.p.3">The reference set can only contain references to entries of the header table, and can't contain references to entries of the
               static table. In addition, it can't contain duplicate references. Therefore, its maximum size is bounded by the size of the
               header table.
            </p>
            <p id="rfc.section.5.1.p.4">By default, the maximum size of the header table is equal to the value of the HTTP/2 setting SETTINGS_HEADER_TABLE_SIZE defined
               by the decoder (see <a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-13#section-6.5.2" title="Defined SETTINGS Parameters">Section 6.5.2</a> of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>). The encoder can change this maximum size (see <a href="#encoding.context.update" title="Encoding Context Update">Section&nbsp;7.3</a>), but it MUST stay lower than or equal to the value of SETTINGS_HEADER_TABLE_SIZE.
            </p>
            <p id="rfc.section.5.1.p.5">After applying an updated value of the HTTP/2 setting SETTINGS_HEADER_TABLE_SIZE that changes the maximum size of the header
               table used by the encoder, the encoder MUST signal this change via an encoding context update (see <a href="#encoding.context.update" title="Encoding Context Update">Section&nbsp;7.3</a>). This encoding context update MUST occur at the beginning of the first header block following the SETTINGS frame sent to
               acknowledge the application of the updated settings.
            </p>
            <p id="rfc.section.5.1.p.6">The size of the header table is the sum of the size of its entries.</p>
            <p id="rfc.section.5.1.p.7">The size of an entry is the sum of its name's length in octets (as defined in <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>), its value's length in octets (<a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>), plus 32.
            </p>
            <p id="rfc.section.5.1.p.8">The size of an entry is calculated using the length of the name and value without any Huffman encoding applied.</p>
            <p id="rfc.section.5.1.p.9">The additional 32 octets account for overhead associated with an entry. For example, an entry structure using two 64-bit pointers
               to reference the name and the value of the entry, and two 64-bit integers for counting the number of references to the name
               and value would have 32 octets of overhead.
            </p>
         </div>
         <div id="entry.eviction">
            <h2 id="rfc.section.5.2"><a href="#rfc.section.5.2">5.2</a>&nbsp;<a href="#entry.eviction">Entry Eviction When Header Table Size Changes</a></h2>
            <p id="rfc.section.5.2.p.1">Whenever the maximum size for the header table is reduced, entries are evicted from the end of the header table until the
               size of the header table is less than or equal to the maximum size.
            </p>
            <p id="rfc.section.5.2.p.2">Whenever an entry is evicted from the header table, any reference to that entry from the reference set is removed.</p>
            <p id="rfc.section.5.2.p.3">The eviction of an entry from the header table causes the index of the entries in the static table to be reduced by one.</p>
         </div>
         <div id="entry.addition">
            <h2 id="rfc.section.5.3"><a href="#rfc.section.5.3">5.3</a>&nbsp;<a href="#entry.addition">Entry Eviction when Adding New Entries</a></h2>
            <p id="rfc.section.5.3.p.1">Whenever a new entry is to be added to the header table entries are evicted from the end of the header table until the size
               of the header table is less than or equal to (maximum size - new entry size), or until the table is empty.
            </p>
            <p id="rfc.section.5.3.p.2">If the representation of the added entry references the name of an entry in the header table, the referenced name is cached
               prior to performing eviction to avoid having the name inadvertently evicted.
            </p>
            <p id="rfc.section.5.3.p.3">If the size of the new entry is less than or equal to the maximum size, that entry is added to the table. It is not an error
               to attempt to add an entry that is larger than the maximum size; an attempt to add an entry larger than the entire table causes
               the table to be emptied of all existing entries.
            </p>
         </div>
      </div>
      <div id="low-level.representation">
         <h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a>&nbsp;<a href="#low-level.representation">Primitive Type Representations</a></h1>
         <p id="rfc.section.6.p.1">HPACK encoding uses two primitive types: unsigned variable length integers, and strings of octets.</p>
         <div id="integer.representation">
            <h2 id="rfc.section.6.1"><a href="#rfc.section.6.1">6.1</a>&nbsp;<a href="#integer.representation">Integer representation</a></h2>
            <p id="rfc.section.6.1.p.1">Integers are used to represent name indexes, pair indexes or string lengths. To allow for optimized processing, an integer
               representation always finishes at the end of an octet.
            </p>
            <p id="rfc.section.6.1.p.2">An integer is represented in two parts: a prefix that fills the current octet and an optional list of octets that are used
               if the integer value does not fit within the prefix. The number of bits of the prefix (called N) is a parameter of the integer
               representation.
            </p>
            <p id="rfc.section.6.1.p.3">The N-bit prefix allows filling the current octet. If the value is small enough (strictly less than 2<sup>N</sup>-1), it is encoded within the N-bit prefix. Otherwise all the bits of the prefix are set to 1 and the value is encoded using
               an unsigned variable length integer representation (see &lt;<a href="http://en.wikipedia.org/wiki/Variable-length_quantity">http://en.wikipedia.org/wiki/Variable-length_quantity</a>&gt;). N is always between 1 and 8 bits. An integer starting at an octet-boundary will have an 8-bit prefix.
            </p>
            <div id="rfc.figure.u.2"></div>
            <p>The algorithm to represent an integer I is as follows:</p><pre class="inline">if I &lt; 2^N - 1, encode I on N bits
else
    encode (2^N - 1) on N bits
    I = I - (2^N - 1)
    while I &gt;= 128
         encode (I % 128 + 128) on 8 bits
         I = I / 128
    encode I on 8 bits
</pre><div id="rfc.figure.u.3"></div>
            <p>For informational purpose, the algorithm to decode an integer I is as follows:</p><pre class="inline">decode I from the next N bits
if I &lt; 2^N - 1, return I
else
    M = 0
    repeat
        B = next octet
        I = I + (B &amp; 127) * 2^M
        M = M + 7
    while B &amp; 128 == 128
    return I
</pre><p id="rfc.section.6.1.p.6">Examples illustrating the encoding of integers are available in <a href="#integer.representation.examples" title="Integer Representation Examples">Appendix&nbsp;D.1</a>.
            </p>
            <p id="rfc.section.6.1.p.7">This integer representation allows for values of indefinite size. It is also possible for an encoder to send a large number
               of zero values, which can waste octets and could be used to overflow integer values. Excessively large integer encodings -
               in value or octet length - MUST be treated as a decoding error. Different limits can be set for each of the different uses
               of integers, based on implementation constraints.
            </p>
         </div>
         <div id="string.literal.representation">
            <h2 id="rfc.section.6.2"><a href="#rfc.section.6.2">6.2</a>&nbsp;<a href="#string.literal.representation">String Literal Representation</a></h2>
            <p id="rfc.section.6.2.p.1">Header field names and header field values can be represented as literal string. A literal string is encoded as a sequence
               of octets, either by directly encoding the literal string's octets, or by using a Huffman code <a href="#HUFFMAN"><cite title="A Method for the Construction of Minimum Redundancy Codes">[HUFFMAN]</cite></a>.
            </p>
            <div id="rfc.figure.u.4"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| H |    String Length (7+)     |
+---+---------------------------+
|  String Data (Length octets)  |
+-------------------------------+
</pre><p class="figure">String Literal Representation</p>
            <p id="rfc.section.6.2.p.3">A literal string representation contains the following fields: </p>
            <dl>
               <dt>H:</dt>
               <dd>A one bit flag, H, indicating whether or not the octets of the string are Huffman encoded.</dd>
               <dt>String Length:</dt>
               <dd>The number of octets used to encode the string literal, encoded as an integer with 7-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;6.1</a>).
               </dd>
               <dt>String Data:</dt>
               <dd>The encoded data of the string literal. If H is '0', then the encoded data is the raw octets of the string literal. If H is
                  '1', then the encoded data is the Huffman encoding of the string literal.
               </dd>
            </dl>
            <p id="rfc.section.6.2.p.4">String literals which use Huffman encoding are encoded with the Huffman code defined in <a href="#huffman.code" title="Huffman Code">Appendix&nbsp;C</a> (see examples in Request Examples with Huffman Coding (<a href="#request.examples.with.huffman.coding" title="Request Examples with Huffman Coding">Appendix&nbsp;D.4</a>) and in Response Examples with Huffman Coding (<a href="#response.examples.with.huffman.coding" title="Response Examples with Huffman Coding">Appendix&nbsp;D.6</a>)). The encoded data is the bitwise concatenation of the codes corresponding to each octet of the string literal.
            </p>
            <p id="rfc.section.6.2.p.5">As the Huffman encoded data doesn't always end at an octet boundary, some padding is inserted after it up to the next octet
               boundary. To prevent this padding to be misinterpreted as part of the string literal, the most significant bits of code corresponding
               to the EOS (end-of-string) symbol are used.
            </p>
            <p id="rfc.section.6.2.p.6">Upon decoding, an incomplete code at the end of the encoded data is to be considered as padding and discarded. A padding strictly
               longer than 7 bits MUST be treated as a decoding error. A padding not corresponding to the most significant bits of the code
               for the EOS symbol MUST be treated as a decoding error. A Huffman encoded string literal containing the EOS symbol MUST be
               treated as a decoding error.
            </p>
         </div>
      </div>
      <div id="detailed.format">
         <h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a>&nbsp;<a href="#detailed.format">Binary Format</a></h1>
         <p id="rfc.section.7.p.1">This section describes the detailed format of each of the different header field representations, plus the encoding context
            update instruction.
         </p>
         <div id="indexed.header.representation">
            <h2 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1</a>&nbsp;<a href="#indexed.header.representation">Indexed Header Field Representation</a></h2>
            <p id="rfc.section.7.1.p.1">An indexed header field representation identifies an entry in either the header table or the static table.</p>
            <p id="rfc.section.7.1.p.2">An indexed header field representation can either causes a header field to be emitted or to be removed from the reference
               set, as described in <a href="#header.representation.processing" title="Header Field Representation Processing">Section&nbsp;4.1</a>.
            </p>
            <div id="rfc.figure.u.5"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 1 |        Index (7+)         |
+---+---------------------------+
</pre><p class="figure">Indexed Header Field</p>
            <p id="rfc.section.7.1.p.4">An indexed header field starts with the '1' 1-bit pattern, followed by the index of the matching pair, represented as an integer
               with a 7-bit prefix.
            </p>
            <p id="rfc.section.7.1.p.5">The index value of 0 is not used. It MUST be treated as a decoding error if found in an indexed header field representation.</p>
         </div>
         <div id="literal.header.representation">
            <h2 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2</a>&nbsp;<a href="#literal.header.representation">Literal Header Field Representation</a></h2>
            <p id="rfc.section.7.2.p.1">A literal header field representation contains a literal header field value. Header field names are either provided as a literal
               or by reference to an existing table entry, either from the header table or the static table.
            </p>
            <p id="rfc.section.7.2.p.2">A literal representation always result in the emission of a header field when decoded.</p>
            <div id="literal.header.with.incremental.indexing">
               <h3 id="rfc.section.7.2.1"><a href="#rfc.section.7.2.1">7.2.1</a>&nbsp;<a href="#literal.header.with.incremental.indexing">Literal Header Field with Incremental Indexing</a></h3>
               <p id="rfc.section.7.2.1.p.1">A literal header field with incremental indexing representation causes the emission of a header field, adding it as a new
                  entry to the header table.
               </p>
               <div id="rfc.figure.u.6"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |      Index (6+)       |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Literal Header Field with Incremental Indexing -                         Indexed Name</p>
               <div id="rfc.figure.u.7"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 1 |           0           |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Literal Header Field with Incremental Indexing -                         New Name</p>
               <p id="rfc.section.7.2.1.p.4">A literal header field with incremental indexing representation starts with the '01' 2-bit pattern.</p>
               <p id="rfc.section.7.2.1.p.5">If the header field name matches the header field name of an entry stored in the header table or the static table, the header
                  field name can be represented using the index of that entry. In this case, the index of the entry is represented as an integer
                  with a 6-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;6.1</a>). This value is always non-zero.
               </p>
               <p id="rfc.section.7.2.1.p.6">Otherwise, the header field name is represented as a literal. A value 0 is used in place of the 6-bit index, followed by the
                  header field name (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>).
               </p>
               <p id="rfc.section.7.2.1.p.7">Either form of header field name representation is followed by the header field value represented as a literal string as described
                  in <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>.
               </p>
            </div>
            <div id="literal.header.without.indexing">
               <h3 id="rfc.section.7.2.2"><a href="#rfc.section.7.2.2">7.2.2</a>&nbsp;<a href="#literal.header.without.indexing">Literal Header Field without Indexing</a></h3>
               <p id="rfc.section.7.2.2.p.1">A literal header field without indexing representation causes the emission of a header field without altering the header table.</p>
               <div id="rfc.figure.u.8"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 |  Index (4+)   |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Literal Header Field without Indexing - Indexed Name</p>
               <div id="rfc.figure.u.9"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 0 |       0       |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Literal Header Field without Indexing - New Name</p>
               <p id="rfc.section.7.2.2.p.4">A literal header field without indexing representation starts with the '0000' 4-bit pattern.</p>
               <p id="rfc.section.7.2.2.p.5">If the header field name matches the header field name of an entry stored in the header table or the static table, the header
                  field name can be represented using the index of that entry. In this case, the index of the entry is represented as an integer
                  with a 4-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;6.1</a>). This value is always non-zero.
               </p>
               <p id="rfc.section.7.2.2.p.6">Otherwise, the header field name is represented as a literal. A value 0 is used in place of the 4-bit index, followed by the
                  header field name (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>).
               </p>
               <p id="rfc.section.7.2.2.p.7">Either form of header field name representation is followed by the header field value represented as a literal string as described
                  in <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>.
               </p>
            </div>
            <div id="literal.header.never.indexed">
               <h3 id="rfc.section.7.2.3"><a href="#rfc.section.7.2.3">7.2.3</a>&nbsp;<a href="#literal.header.never.indexed">Literal Header Field Never Indexed</a></h3>
               <p id="rfc.section.7.2.3.p.1">A literal header field never indexed representation causes the emission of a header field without altering the header table.
                  Intermediaries MUST use the same representation for encoding this header field.
               </p>
               <div id="rfc.figure.u.10"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |  Index (4+)   |
+---+---+-----------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Literal Header Field Never Indexed - Indexed Name</p>
               <div id="rfc.figure.u.11"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 0 | 1 |       0       |
+---+---+-----------------------+
| H |     Name Length (7+)      |
+---+---------------------------+
|  Name String (Length octets)  |
+---+---------------------------+
| H |     Value Length (7+)     |
+---+---------------------------+
| Value String (Length octets)  |
+-------------------------------+
</pre><p class="figure">Literal Header Field Never Indexed - New Name</p>
               <p id="rfc.section.7.2.3.p.4">A literal header field never indexed representation starts with the '0001' 4-bit pattern.</p>
               <p id="rfc.section.7.2.3.p.5">When a header field is represented as a literal header field never indexed, it MUST always be encoded with this specific literal
                  representation. In particular, when a peer sends a header field that it received represented as a literal header field never
                  indexed, it MUST use the same representation to forward this header field.
               </p>
               <p id="rfc.section.7.2.3.p.6">This representation is intended for protecting header field values that are not to be put at risk by compressing them (see <a href="#compression.based.attacks" title="Probing Header Table State">Section&nbsp;8.1</a> for more details).
               </p>
               <p id="rfc.section.7.2.3.p.7">The encoding of the representation is identical to the literal header field without indexing (see <a href="#literal.header.without.indexing" title="Literal Header Field without Indexing">Section&nbsp;7.2.2</a>).
               </p>
            </div>
         </div>
         <div id="encoding.context.update">
            <h2 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3</a>&nbsp;<a href="#encoding.context.update">Encoding Context Update</a></h2>
            <p id="rfc.section.7.3.p.1">An encoding context update causes the immediate application of a change to the encoding context.</p>
            <div id="rfc.figure.u.12"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | F |      ...      |
+---+---------------------------+
</pre><p class="figure">Context Update</p>
            <p id="rfc.section.7.3.p.3">An encoding context update starts with the '001' 3-bit pattern.</p>
            <p id="rfc.section.7.3.p.4">It is followed by a flag specifying the type of the change, and by any data necessary to describe the change itself.</p>
            <div id="rfc.figure.u.13"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 1 |       0       |
+---+---------------------------+
</pre><p class="figure">Reference Set Emptying</p>
            <p id="rfc.section.7.3.p.6">The flag bit being set to '1' signals that the reference set is emptied. The remaining bits MUST be set to '0', non-zero values
               MUST be treated as a decoding error.
            </p>
            <div id="rfc.figure.u.14"></div><pre class="inline">  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 0 | Max size (4+) |
+---+---------------------------+
</pre><p class="figure">Maximum Header Table Size Change</p>
            <p id="rfc.section.7.3.p.8">The flag bit being set to '0' signals that a change to the maximum size of the header table. This new maximum size MUST be
               lower than or equal to the maximum set by the decoder. That is, the value of the HTTP/2 setting SETTINGS_HEADER_TABLE_SIZE,
               defined in <a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-13#section-6.5.2" title="Defined SETTINGS Parameters">Section 6.5.2</a> of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>.
            </p>
            <p id="rfc.section.7.3.p.9">The new maximum size is encoded as an integer with a 4-bit prefix (see <a href="#integer.representation" title="Integer representation">Section&nbsp;6.1</a>).
            </p>
            <p id="rfc.section.7.3.p.10">Reducing the maximum size of the header table causes entries to be evicted (see <a href="#entry.eviction" title="Entry Eviction When Header Table Size Changes">Section&nbsp;5.2</a>).
            </p>
         </div>
      </div>
      <div id="Security">
         <h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a>&nbsp;<a href="#Security">Security Considerations</a></h1>
         <p id="rfc.section.8.p.1">This section describes potential areas of security concern with HPACK: </p>
         <ul>
            <li>Use of compression as a length-based oracle for verifying guesses about secrets that are compressed into a shared compression
               context.
            </li>
            <li>Denial of service resulting from exhausting processing or memory capacity at a decoder.</li>
         </ul>
         <div id="compression.based.attacks">
            <h2 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1</a>&nbsp;<a href="#compression.based.attacks">Probing Header Table State</a></h2>
            <p id="rfc.section.8.1.p.1">HPACK reduces the length of header field encodings by exploiting the redundancy inherent in protocols like HTTP. The ultimate
               goal of this is to reduce the amount of data that is required to send HTTP requests or responses.
            </p>
            <p id="rfc.section.8.1.p.2">The compression context used to encode header fields can be probed by an attacker that has the following capabilities: to
               define header fields to be encoded and transmitted; and to observe the length of those fields once they are encoded. This
               allows an attacker to adaptively modify requests in order to confirm guesses about the header table state. If a guess is compressed
               into a shorter length, the attacker can observe the encoded length and infer that the guess was correct.
            </p>
            <p id="rfc.section.8.1.p.3">This is possible because while TLS provides confidentiality protection for content, it only provides a limited amount of protection
               for the length of that content. 
            </p>
            <dl>
               <dt>Note:</dt>
               <dd>Padding schemes only provide limited protection against an attacker with these capabilities, potentially only forcing an increased
                  number of guesses to learn the length associated with a given guess. Padding schemes also work directly against compression
                  by increasing the number of bits that are transmitted.
               </dd>
            </dl>
            <p id="rfc.section.8.1.p.4">Attacks like <a href="#CRIME"><cite title="The CRIME Attack">[CRIME]</cite></a> demonstrated the existence of these general attacker capabilities. The specific attack exploited the fact that <a href="#DEFLATE"><cite title="DEFLATE Compressed Data Format Specification version 1.3">[DEFLATE]</cite></a> removes redundancy based on prefix matching. This permitted the attacker to confirm guesses a character at a time, reducing
               an exponential-time attack into a constant time attack.
            </p>
            <div>
               <h3 id="rfc.section.8.1.1"><a href="#rfc.section.8.1.1">8.1.1</a>&nbsp;Applicability to HPACK and HTTP
               </h3>
               <p id="rfc.section.8.1.1.p.1">HPACK mitigates but does not completely prevent attacks modelled on <a href="#CRIME"><cite title="The CRIME Attack">[CRIME]</cite></a> by forcing a guess to match an entire header field value, rather than individual characters. An attacker can only learn whether
                  a guess is correct or not, so is reduced to a brute force guess for the header field values.
               </p>
               <p id="rfc.section.8.1.1.p.2">The viability of recovering specific header field values therefore depends on the entropy of values. As a result, values with
                  high entropy are unlikely to be recovered successfully. However, values with low entropy remain vulnerable.
               </p>
               <p id="rfc.section.8.1.1.p.3">Attacks of this nature are possible any time that two mutually distrustful entities control requests or responses that are
                  placed onto a single HTTP/2 connection. If the shared HPACK compressor permits one entity to add entries to the header table,
                  and the other to access those entries, then the state of the table can be learned.
               </p>
               <p id="rfc.section.8.1.1.p.4">Having requests or responses from mutually distrustful entities occurs when an intermediary either: </p>
               <ul>
                  <li>sends requests from multiple clients on a single connection toward an origin server, or</li>
                  <li>takes responses from multiple origin servers and places them on a shared connection toward a client.</li>
               </ul>
               <p> Web browsers also need to assume that requests made on the same connection by different <a href="#ORIGIN">web origins</a> <cite title="The Web Origin Concept">[ORIGIN]</cite> are made by mutually distrustful entities.
               </p>
            </div>
            <div>
               <h3 id="rfc.section.8.1.2"><a href="#rfc.section.8.1.2">8.1.2</a>&nbsp;Mitigation
               </h3>
               <p id="rfc.section.8.1.2.p.1">Users of HTTP that require confidentiality for header fields can use values with entropy sufficient to make guessing infeasible.
                  However, this is impractical as a general solution because it forces all users of HTTP to take steps to mitigate attacks.
                  It would impose new constraints on how HTTP is used.
               </p>
               <p id="rfc.section.8.1.2.p.2">Rather than impose constraints on users of HTTP, an implementation of HPACK can instead constrain how compression is applied
                  in order to limit the potential for header table probing.
               </p>
               <p id="rfc.section.8.1.2.p.3">An ideal solution segregates access to the header table based on the entity that is constructing header fields. Header field
                  values that are added to the table are attributed to an entity, and only the entity that created an particular value can extract
                  that value.
               </p>
               <p id="rfc.section.8.1.2.p.4">To improve compression performance of this option, certain entries might be tagged as being public. For example, a web browser
                  might make the values of the Accept-Encoding header field available in all requests.
               </p>
               <p id="rfc.section.8.1.2.p.5">An encoder without good knowledge of the provenance of header fields might instead introduce a penalty for bad guesses, such
                  that attempts to guess a header field value results in all values being removed from consideration in all future requests,
                  effectively preventing further guesses. 
               </p>
               <dl>
                  <dt>Note:</dt>
                  <dd>Simply removing values from the header table can be ineffectual if the attacker has a reliable way of causing values to be
                     reinstalled. For example, a request to load an image in a web browser typically includes the Cookie header field (a potentially
                     highly valued target for this sort of attack), and web sites can easily force an image to be loaded, thereby refreshing the
                     entry in the header table.
                  </dd>
               </dl>
               <p id="rfc.section.8.1.2.p.6">This response might be made inversely proportional to the length of the header field. Marking as inaccessible might occur
                  for shorter values more quickly or with higher probability than for longer values.
               </p>
               <p id="rfc.section.8.1.2.p.7">Implementations might also choose to protect certain header fields that are known to be highly valued, such as the Authorization
                  or Cookie header fields, by disabling or further limiting compression.
               </p>
            </div>
            <div>
               <h3 id="rfc.section.8.1.3"><a href="#rfc.section.8.1.3">8.1.3</a>&nbsp;Never Indexed Literals
               </h3>
               <p id="rfc.section.8.1.3.p.1">Refusing to generate an indexed representation for a header field is only effective if compression is avoided on all hops.
                  The never indexed literal (<a href="#literal.header.never.indexed" title="Literal Header Field Never Indexed">Section&nbsp;7.2.3</a>) can be used to signal to intermediaries that a particular value was intentionally sent as a literal. An intermediary MUST
                  NOT re-encode a value that uses the never indexed literal as an indexed representation.
               </p>
            </div>
         </div>
         <div>
            <h2 id="rfc.section.8.2"><a href="#rfc.section.8.2">8.2</a>&nbsp;Static Huffman Encoding
            </h2>
            <p id="rfc.section.8.2.p.1">There is currently no known threat taking advantage of the use of a fixed Huffman encoding. A study has shown that using a
               fixed Huffman encoding table created an information leakage, however this same study concluded that an attacker could not
               take advantage of this information leakage to recover any meaningful amount of information (see <a href="#PETAL"><cite title="PETAL: Preset Encoding Table Information Leakage">[PETAL]</cite></a>).
            </p>
         </div>
         <div>
            <h2 id="rfc.section.8.3"><a href="#rfc.section.8.3">8.3</a>&nbsp;Memory Consumption
            </h2>
            <p id="rfc.section.8.3.p.1">An attacker can try to cause an endpoint to exhaust its memory. HPACK is designed to limit both the peak and state amounts
               of memory allocated by an endpoint.
            </p>
            <p id="rfc.section.8.3.p.2">The amount of memory used by the compressor state is limited by the decoder using the value of the HTTP/2 setting SETTINGS_HEADER_TABLE_SIZE
               (see <a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-13#section-6.5.2" title="Defined SETTINGS Parameters">Section 6.5.2</a> of <a href="#HTTP2"><cite title="Hypertext Transfer Protocol version 2">[HTTP2]</cite></a>). This limit takes into account both the size of the data stored in the header table, plus a small allowance for overhead.
            </p>
            <p id="rfc.section.8.3.p.3">A decoder can limit the amount of state memory used by setting an appropriate value for the setting SETTINGS_HEADER_TABLE_SIZE.
               An encoder can limit the amount of state memory it uses by signaling lower header table size than the decoder allows (see <a href="#encoding.context.update" title="Encoding Context Update">Section&nbsp;7.3</a>).
            </p>
            <p id="rfc.section.8.3.p.4">The amount of temporary memory consumed by an encoder or decoder can be limited by processing header fields sequentially.
               An implementation does not need to retain a complete set of header fields. Note however that it might be necessary for an
               application to retain a complete header set for other reasons; even though HPACK does not force this to occur, application
               constraints might make this necessary.
            </p>
         </div>
         <div>
            <h2 id="rfc.section.8.4"><a href="#rfc.section.8.4">8.4</a>&nbsp;Implementation Limits
            </h2>
            <p id="rfc.section.8.4.p.1">An implementation of HPACK needs to ensure that large values for integers, long encoding for integers, or long string literals
               do not create security weaknesses.
            </p>
            <p id="rfc.section.8.4.p.2">An implementation has to set a limit for the values it accepts for integers, as well as for the encoded length (see <a href="#integer.representation" title="Integer representation">Section&nbsp;6.1</a>). In the same way, it has to set a limit to the length it accepts for string literals (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>).
            </p>
         </div>
      </div>
      <div>
         <h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a>&nbsp;Acknowledgements
         </h1>
         <p id="rfc.section.9.p.1">This document includes substantial input from the following individuals: </p>
         <ul>
            <li>Mike Bishop, Jeff Pinner, Julian Reschke, Martin Thomson (substantial editorial contributions).</li>
            <li>Johnny Graettinger (Huffman code statistics).</li>
         </ul>
      </div>
      <h1 id="rfc.references"><a id="rfc.section.10" href="#rfc.section.10">10.</a> References
      </h1>
      <h2 id="rfc.references.1"><a href="#rfc.section.10.1" id="rfc.section.10.1">10.1</a> Normative References
      </h2>
      <table>
         <tr>
            <td class="reference"><b id="HTTP2">[HTTP2]</b></td>
            <td class="top">Belshe, M., Peon, R., and M. Thomson, Ed., “<a href="https://tools.ietf.org/html/draft-ietf-httpbis-http2-13">Hypertext Transfer Protocol version 2</a>”, Internet-Draft&nbsp;draft-ietf-httpbis-http2-13 (work in progress), April&nbsp;2014.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="RFC2119">[RFC2119]</b></td>
            <td class="top"><a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, “<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>”, BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="RFC7230">[RFC7230]</b></td>
            <td class="top"><a href="mailto:fielding@gbiv.com" title="Adobe Systems Incorporated">Fielding, R., Ed.</a> and <a href="mailto:julian.reschke@greenbytes.de" title="greenbytes GmbH">J. Reschke, Ed.</a>, “<a href="https://tools.ietf.org/html/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>”, RFC&nbsp;7230, June&nbsp;2014.
            </td>
         </tr>
      </table>
      <h2 id="rfc.references.2"><a href="#rfc.section.10.2" id="rfc.section.10.2">10.2</a> Informative References
      </h2>
      <table>
         <tr>
            <td class="reference"><b id="CANONICAL">[CANONICAL]</b></td>
            <td class="top">Schwartz, E. and B. Kallick, “<a href="https://dl.acm.org/citation.cfm?id=363991">Generating a canonical prefix encoding</a>”, Communications of the ACM&nbsp;Volume 7 Issue 3, pp. 166-169, March&nbsp;1964, &lt;<a href="https://dl.acm.org/citation.cfm?id=363991">https://dl.acm.org/citation.cfm?id=363991</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="CRIME">[CRIME]</b></td>
            <td class="top">Rizzo, J. and T. Duong, “<a href="https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU/edit#slide=id.g1eb6c1b5_3_6">The CRIME Attack</a>”, September&nbsp;2012, &lt;<a href="https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU/edit#slide=id.g1eb6c1b5_3_6">https://docs.google.com/a/twist.com/presentation/d/11eBmGiHbYcHR9gL5nDyZChu_-lCa2GizeuOfaLU2HOU/edit#slide=id.g1eb6c1b5_3_6</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="DEFLATE">[DEFLATE]</b></td>
            <td class="top">Deutsch, P., “<a href="https://tools.ietf.org/html/rfc1951">DEFLATE Compressed Data Format Specification version 1.3</a>”, RFC&nbsp;1951, May&nbsp;1996.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="HUFFMAN">[HUFFMAN]</b></td>
            <td class="top">Huffman, D., “<a href="https://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119">A Method for the Construction of Minimum Redundancy Codes</a>”, Proceedings of the Institute of Radio Engineers&nbsp;Volume 40, Number 9, pp. 1098-1101, September&nbsp;1952, &lt;<a href="https://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119">https://ieeexplore.ieee.org/xpl/articleDetails.jsp?arnumber=4051119</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="ORIGIN">[ORIGIN]</b></td>
            <td class="top">Barth, A., “<a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>”, RFC&nbsp;6454, December&nbsp;2011.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="PETAL">[PETAL]</b></td>
            <td class="top">Tan, J. and J. Nahata, “<a href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">PETAL: Preset Encoding Table Information Leakage</a>”, April&nbsp;2013, &lt;<a href="http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf">http://www.pdl.cmu.edu/PDL-FTP/associated/CMU-PDL-13-106.pdf</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="SPDY">[SPDY]</b></td>
            <td class="top">Belshe, M. and R. Peon, “<a href="https://tools.ietf.org/html/draft-mbelshe-httpbis-spdy-00">SPDY Protocol</a>”, Internet-Draft&nbsp;draft-mbelshe-httpbis-spdy-00 (work in progress), February&nbsp;2012.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="SPDY-DESC-1">[SPDY-DESC-1]</b></td>
            <td class="top">Belshe, M., “<a href="https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-3">IETF83: SPDY and What to Consider for HTTP/2.0</a>”, March&nbsp;2012, &lt;<a href="https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-3">https://www.ietf.org/proceedings/83/slides/slides-83-httpbis-3</a>&gt;.
            </td>
         </tr>
         <tr>
            <td class="reference"><b id="SPDY-DESC-2">[SPDY-DESC-2]</b></td>
            <td class="top">McManus, P., “<a href="https://bitsup.blogspot.com/2011/09/spdy-what-i-like-about-you.html">SPDY: What I Like About You</a>”, September&nbsp;2011, &lt;<a href="https://bitsup.blogspot.com/2011/09/spdy-what-i-like-about-you.html">https://bitsup.blogspot.com/2011/09/spdy-what-i-like-about-you.html</a>&gt;.
            </td>
         </tr>
      </table>
      <div>
         <h1 id="rfc.section.A" class="np"><a href="#rfc.section.A">A.</a>&nbsp;Change Log (to be removed by RFC Editor before publication
         </h1>
         <div id="changes.since.draft-ietf-httpbis-header-compression-07">
            <h2 id="rfc.section.A.1"><a href="#rfc.section.A.1">A.1</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-07">Since draft-ietf-httpbis-header-compression-07</a></h2>
            <ul>
               <li>Removed old text on index value of 0.</li>
               <li>Added clarification for signalling of maximum table size after a SETTINGS_HEADER_TABLE_SIZE update.</li>
               <li>Rewrote security considerations.</li>
               <li>Many editorial clarifications or improvements.</li>
               <li>Added convention section.</li>
               <li>Reworked document's outline.</li>
               <li>Updated static table. Entry 16 has now "gzip, deflate" for value.</li>
               <li>Updated Huffman table, using data set provided by Google.</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-06">
            <h2 id="rfc.section.A.2"><a href="#rfc.section.A.2">A.2</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-06">Since draft-ietf-httpbis-header-compression-06</a></h2>
            <ul>
               <li>Updated format to include literal headers that must never be compressed.</li>
               <li>Updated security considerations.</li>
               <li>Moved integer encoding examples to the appendix.</li>
               <li>Updated Huffman table.</li>
               <li>Updated static header table (adding and removing status values).</li>
               <li>Updated examples.</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-05">
            <h2 id="rfc.section.A.3"><a href="#rfc.section.A.3">A.3</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-05">Since draft-ietf-httpbis-header-compression-05</a></h2>
            <ul>
               <li>Regenerated examples.</li>
               <li>Only one Huffman table for requests and responses.</li>
               <li>Added maximum size for header table, independent of SETTINGS_HEADER_TABLE_SIZE.</li>
               <li>Added pseudo-code for integer decoding.</li>
               <li>Improved examples (removing unnecessary removals).</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-04">
            <h2 id="rfc.section.A.4"><a href="#rfc.section.A.4">A.4</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-04">Since draft-ietf-httpbis-header-compression-04</a></h2>
            <ul>
               <li>Updated examples: take into account changes in the spec, and show more features.</li>
               <li>Use 'octet' everywhere instead of having both 'byte' and 'octet'.</li>
               <li>Added reference set emptying.</li>
               <li>Editorial changes and clarifications.</li>
               <li>Added "host" header to the static table.</li>
               <li>Ordering for list of values (either NULL- or comma-separated).</li>
            </ul>
         </div>
         <div id="changes.since.draft-ietf-httpbis-header-compression-03">
            <h2 id="rfc.section.A.5"><a href="#rfc.section.A.5">A.5</a>&nbsp;<a href="#changes.since.draft-ietf-httpbis-header-compression-03">Since draft-ietf-httpbis-header-compression-03</a></h2>
            <ul>
               <li>A large number of editorial changes; changed the description of evicting/adding new entries.</li>
               <li>Removed substitution indexing</li>
               <li>Changed 'initial headers' to 'static headers', as per issue #258</li>
               <li>Merged 'request' and 'response' static headers, as per issue #259</li>
               <li>Changed text to indicate that new headers are added at index 0 and expire from the largest index, as per issue #233</li>
            </ul>
         </div>
         <div>
            <h2 id="rfc.section.A.6"><a href="#rfc.section.A.6">A.6</a>&nbsp;Since draft-ietf-httpbis-header-compression-02
            </h2>
            <ul>
               <li>Corrected error in integer encoding pseudocode.</li>
            </ul>
         </div>
         <div>
            <h2 id="rfc.section.A.7"><a href="#rfc.section.A.7">A.7</a>&nbsp;Since draft-ietf-httpbis-header-compression-01
            </h2>
            <p id="rfc.section.A.7.p.1"></p>
            <ul>
               <li>Refactored of Header Encoding Section: split definitions and processing rule.</li>
               <li>Backward incompatible change: Updated reference set management as per issue #214. This changes how the interaction between
                  the reference set and eviction works. This also changes the working of the reference set in some specific cases.
               </li>
               <li>Backward incompatible change: modified initial header list, as per issue #188.</li>
               <li>Added example of 32 octets entry structure (issue #191).</li>
               <li>Added Header Set Completion section. Reflowed some text. Clarified some writing which was akward. Added text about duplicate
                  header entry encoding. Clarified some language w.r.t Header Set. Changed x-my-header to mynewheader. Added text in the HeaderEmission
                  section indicating that the application may also be able to free up memory more quickly. Added information in Security Considerations
                  section.
               </li>
            </ul>
         </div>
         <div>
            <h2 id="rfc.section.A.8"><a href="#rfc.section.A.8">A.8</a>&nbsp;Since draft-ietf-httpbis-header-compression-00
            </h2>
            <p id="rfc.section.A.8.p.1"></p>
            <ul class="empty">
               <li>Fixed bug/omission in integer representation algorithm.</li>
               <li>Changed the document title.</li>
               <li>Header matching text rewritten.</li>
               <li>Changed the definition of header emission.</li>
               <li>Changed the name of the setting which dictates how much memory the compression context should use.</li>
               <li>Removed "specific use cases" section</li>
               <li>Corrected erroneous statement about what index can be contained in one octet</li>
               <li>Added descriptions of opcodes</li>
               <li>Removed security claims from introduction.</li>
            </ul>
         </div>
      </div>
      <div id="static.table">
         <h1 id="rfc.section.B"><a href="#rfc.section.B">B.</a>&nbsp;<a href="#static.table">Static Table</a></h1>
         <p id="rfc.section.B.p.1">The static table consists of an unchangeable ordered list of (name, value) pairs. The first entry in the table is always represented
            by the index len(header table) + 1, and the last entry in the table is represented by the index len(header table) + len(static
            table).
         </p>
         <p id="rfc.section.B.p.2">The static table was created by listing the most common header fields that are valid for messages exchanged inside a HTTP/2
            connection. For header fields with a few frequent values, an entry was added for each of these frequent values. For other
            header fields, an entry was added with an empty value.
         </p>
         <p id="rfc.section.B.p.3">The following table lists the pre-defined header fields that make-up the static table.</p>
         <div id="rfc.table.1">
            <div id="static.table.entries"></div>
            <table class="tt full center" cellpadding="3" cellspacing="0">
               <caption>Table 1: Static Table Entries</caption>
               <thead>
                  <tr>
                     <th>Index</th>
                     <th>Header Name</th>
                     <th>Header Value</th>
                  </tr>
               </thead>
               <tbody>
                  <tr>
                     <td class="left">1</td>
                     <td class="left">:authority</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">2</td>
                     <td class="left">:method</td>
                     <td class="left">GET</td>
                  </tr>
                  <tr>
                     <td class="left">3</td>
                     <td class="left">:method</td>
                     <td class="left">POST</td>
                  </tr>
                  <tr>
                     <td class="left">4</td>
                     <td class="left">:path</td>
                     <td class="left">/</td>
                  </tr>
                  <tr>
                     <td class="left">5</td>
                     <td class="left">:path</td>
                     <td class="left">/index.html</td>
                  </tr>
                  <tr>
                     <td class="left">6</td>
                     <td class="left">:scheme</td>
                     <td class="left">http</td>
                  </tr>
                  <tr>
                     <td class="left">7</td>
                     <td class="left">:scheme</td>
                     <td class="left">https</td>
                  </tr>
                  <tr>
                     <td class="left">8</td>
                     <td class="left">:status</td>
                     <td class="left">200</td>
                  </tr>
                  <tr>
                     <td class="left">9</td>
                     <td class="left">:status</td>
                     <td class="left">204</td>
                  </tr>
                  <tr>
                     <td class="left">10</td>
                     <td class="left">:status</td>
                     <td class="left">206</td>
                  </tr>
                  <tr>
                     <td class="left">11</td>
                     <td class="left">:status</td>
                     <td class="left">304</td>
                  </tr>
                  <tr>
                     <td class="left">12</td>
                     <td class="left">:status</td>
                     <td class="left">400</td>
                  </tr>
                  <tr>
                     <td class="left">13</td>
                     <td class="left">:status</td>
                     <td class="left">404</td>
                  </tr>
                  <tr>
                     <td class="left">14</td>
                     <td class="left">:status</td>
                     <td class="left">500</td>
                  </tr>
                  <tr>
                     <td class="left">15</td>
                     <td class="left">accept-charset</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">16</td>
                     <td class="left">accept-encoding</td>
                     <td class="left">gzip, deflate</td>
                  </tr>
                  <tr>
                     <td class="left">17</td>
                     <td class="left">accept-language</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">18</td>
                     <td class="left">accept-ranges</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">19</td>
                     <td class="left">accept</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">20</td>
                     <td class="left">access-control-allow-origin</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">21</td>
                     <td class="left">age</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">22</td>
                     <td class="left">allow</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">23</td>
                     <td class="left">authorization</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">24</td>
                     <td class="left">cache-control</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">25</td>
                     <td class="left">content-disposition</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">26</td>
                     <td class="left">content-encoding</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">27</td>
                     <td class="left">content-language</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">28</td>
                     <td class="left">content-length</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">29</td>
                     <td class="left">content-location</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">30</td>
                     <td class="left">content-range</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">31</td>
                     <td class="left">content-type</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">32</td>
                     <td class="left">cookie</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">33</td>
                     <td class="left">date</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">34</td>
                     <td class="left">etag</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">35</td>
                     <td class="left">expect</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">36</td>
                     <td class="left">expires</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">37</td>
                     <td class="left">from</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">38</td>
                     <td class="left">host</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">39</td>
                     <td class="left">if-match</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">40</td>
                     <td class="left">if-modified-since</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">41</td>
                     <td class="left">if-none-match</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">42</td>
                     <td class="left">if-range</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">43</td>
                     <td class="left">if-unmodified-since</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">44</td>
                     <td class="left">last-modified</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">45</td>
                     <td class="left">link</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">46</td>
                     <td class="left">location</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">47</td>
                     <td class="left">max-forwards</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">48</td>
                     <td class="left">proxy-authenticate</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">49</td>
                     <td class="left">proxy-authorization</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">50</td>
                     <td class="left">range</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">51</td>
                     <td class="left">referer</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">52</td>
                     <td class="left">refresh</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">53</td>
                     <td class="left">retry-after</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">54</td>
                     <td class="left">server</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">55</td>
                     <td class="left">set-cookie</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">56</td>
                     <td class="left">strict-transport-security</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">57</td>
                     <td class="left">transfer-encoding</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">58</td>
                     <td class="left">user-agent</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">59</td>
                     <td class="left">vary</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">60</td>
                     <td class="left">via</td>
                     <td class="left"></td>
                  </tr>
                  <tr>
                     <td class="left">61</td>
                     <td class="left">www-authenticate</td>
                     <td class="left"></td>
                  </tr>
               </tbody>
            </table>
         </div>
         <p id="rfc.section.B.p.4"><a href="#static.table.entries">Table&nbsp;1</a> gives the index of each entry in the static table. The full index of each entry, to be used for encoding a reference to this
            entry, is computed by adding the number of entries in the header table to this index.
         </p>
      </div>
      <div id="huffman.code">
         <h1 id="rfc.section.C"><a href="#rfc.section.C">C.</a>&nbsp;<a href="#huffman.code">Huffman Code</a></h1>
         <p id="rfc.section.C.p.1">The following Huffman code is used when encoding string literals with a Huffman coding (see <a href="#string.literal.representation" title="String Literal Representation">Section&nbsp;6.2</a>).
         </p>
         <p id="rfc.section.C.p.2">This Huffman code was generated from statistics obtained on a large sample of HTTP headers. It is a canonical Huffman code <a href="#CANONICAL"><cite title="Generating a canonical prefix encoding">[CANONICAL]</cite></a> with some tweaking to ensure that no symbol has a unique code length.
         </p>
         <p id="rfc.section.C.p.3">Each row in the table defines the code used to represent a symbol: </p>
         <dl>
            <dt>sym:</dt>
            <dd>The symbol to be represented. It is the decimal value of an octet, possibly prepended with its ASCII representation. A specific
               symbol, "EOS", is used to indicate the end of a string literal.
            </dd>
            <dt>code as bits:</dt>
            <dd>The Huffman code for the symbol represented as a base-2 integer, aligned on the most significant bit (MSB).</dd>
            <dt>code as hex:</dt>
            <dd>The Huffman code for the symbol, represented as a hexadecimal integer, aligned on the least significant bit (LSB).</dd>
            <dt>len:</dt>
            <dd>The number of bits for the code representing the symbol.</dd>
         </dl>
         <p id="rfc.section.C.p.4">As an example, the code for the symbol 47 (corresponding to the ASCII character "/") consists in the 6 bits "0", "1", "1",
            "0", "0", "0". This corresponds to the value 0x18 (in hexadecimal) encoded on 6 bits.
         </p>
         <div id="rfc.figure.u.15"></div><pre>                                                    code
                       code as bits                as hex    len
     sym              aligned to MSB               aligned    in
                                                   to LSB    bits
    (  0)  |11111111|11000                             1ff8  [13]
    (  1)  |11111111|11111111|1011000                7fffd8  [23]
    (  2)  |11111111|11111111|11111110|0010         fffffe2  [28]
    (  3)  |11111111|11111111|11111110|0011         fffffe3  [28]
    (  4)  |11111111|11111111|11111110|0100         fffffe4  [28]
    (  5)  |11111111|11111111|11111110|0101         fffffe5  [28]
    (  6)  |11111111|11111111|11111110|0110         fffffe6  [28]
    (  7)  |11111111|11111111|11111110|0111         fffffe7  [28]
    (  8)  |11111111|11111111|11111110|1000         fffffe8  [28]
    (  9)  |11111111|11111111|11101010               ffffea  [24]
    ( 10)  |11111111|11111111|11111111|111100      3ffffffc  [30]
    ( 11)  |11111111|11111111|11111110|1001         fffffe9  [28]
    ( 12)  |11111111|11111111|11111110|1010         fffffea  [28]
    ( 13)  |11111111|11111111|11111111|111101      3ffffffd  [30]
    ( 14)  |11111111|11111111|11111110|1011         fffffeb  [28]
    ( 15)  |11111111|11111111|11111110|1100         fffffec  [28]
    ( 16)  |11111111|11111111|11111110|1101         fffffed  [28]
    ( 17)  |11111111|11111111|11111110|1110         fffffee  [28]
    ( 18)  |11111111|11111111|11111110|1111         fffffef  [28]
    ( 19)  |11111111|11111111|11111111|0000         ffffff0  [28]
    ( 20)  |11111111|11111111|11111111|0001         ffffff1  [28]
    ( 21)  |11111111|11111111|11111111|0010         ffffff2  [28]
    ( 22)  |11111111|11111111|11111111|111110      3ffffffe  [30]
    ( 23)  |11111111|11111111|11111111|0011         ffffff3  [28]
    ( 24)  |11111111|11111111|11111111|0100         ffffff4  [28]
    ( 25)  |11111111|11111111|11111111|0101         ffffff5  [28]
    ( 26)  |11111111|11111111|11111111|0110         ffffff6  [28]
    ( 27)  |11111111|11111111|11111111|0111         ffffff7  [28]
    ( 28)  |11111111|11111111|11111111|1000         ffffff8  [28]
    ( 29)  |11111111|11111111|11111111|1001         ffffff9  [28]
    ( 30)  |11111111|11111111|11111111|1010         ffffffa  [28]
    ( 31)  |11111111|11111111|11111111|1011         ffffffb  [28]
' ' ( 32)  |010100                                       14  [ 6]
'!' ( 33)  |11111110|00                                 3f8  [10]
'"' ( 34)  |11111110|01                                 3f9  [10]
'#' ( 35)  |11111111|1010                               ffa  [12]
'$' ( 36)  |11111111|11001                             1ff9  [13]
'%' ( 37)  |010101                                       15  [ 6]
'&amp;' ( 38)  |11111000                                     f8  [ 8]
''' ( 39)  |11111111|010                                7fa  [11]
'(' ( 40)  |11111110|10                                 3fa  [10]
')' ( 41)  |11111110|11                                 3fb  [10]
'*' ( 42)  |11111001                                     f9  [ 8]
'+' ( 43)  |11111111|011                                7fb  [11]
',' ( 44)  |11111010                                     fa  [ 8]
'-' ( 45)  |010110                                       16  [ 6]
'.' ( 46)  |010111                                       17  [ 6]
'/' ( 47)  |011000                                       18  [ 6]
'0' ( 48)  |00000                                         0  [ 5]
'1' ( 49)  |00001                                         1  [ 5]
'2' ( 50)  |00010                                         2  [ 5]
'3' ( 51)  |011001                                       19  [ 6]
'4' ( 52)  |011010                                       1a  [ 6]
'5' ( 53)  |011011                                       1b  [ 6]
'6' ( 54)  |011100                                       1c  [ 6]
'7' ( 55)  |011101                                       1d  [ 6]
'8' ( 56)  |011110                                       1e  [ 6]
'9' ( 57)  |011111                                       1f  [ 6]
':' ( 58)  |1011100                                      5c  [ 7]
';' ( 59)  |11111011                                     fb  [ 8]
'&lt;' ( 60)  |11111111|1111100                           7ffc  [15]
'=' ( 61)  |100000                                       20  [ 6]
'&gt;' ( 62)  |11111111|1011                               ffb  [12]
'?' ( 63)  |11111111|00                                 3fc  [10]
'@' ( 64)  |11111111|11010                             1ffa  [13]
'A' ( 65)  |100001                                       21  [ 6]
'B' ( 66)  |1011101                                      5d  [ 7]
'C' ( 67)  |1011110                                      5e  [ 7]
'D' ( 68)  |1011111                                      5f  [ 7]
'E' ( 69)  |1100000                                      60  [ 7]
'F' ( 70)  |1100001                                      61  [ 7]
'G' ( 71)  |1100010                                      62  [ 7]
'H' ( 72)  |1100011                                      63  [ 7]
'I' ( 73)  |1100100                                      64  [ 7]
'J' ( 74)  |1100101                                      65  [ 7]
'K' ( 75)  |1100110                                      66  [ 7]
'L' ( 76)  |1100111                                      67  [ 7]
'M' ( 77)  |1101000                                      68  [ 7]
'N' ( 78)  |1101001                                      69  [ 7]
'O' ( 79)  |1101010                                      6a  [ 7]
'P' ( 80)  |1101011                                      6b  [ 7]
'Q' ( 81)  |1101100                                      6c  [ 7]
'R' ( 82)  |1101101                                      6d  [ 7]
'S' ( 83)  |1101110                                      6e  [ 7]
'T' ( 84)  |1101111                                      6f  [ 7]
'U' ( 85)  |1110000                                      70  [ 7]
'V' ( 86)  |1110001                                      71  [ 7]
'W' ( 87)  |1110010                                      72  [ 7]
'X' ( 88)  |11111100                                     fc  [ 8]
'Y' ( 89)  |1110011                                      73  [ 7]
'Z' ( 90)  |11111101                                     fd  [ 8]
'[' ( 91)  |11111111|11011                             1ffb  [13]
'\' ( 92)  |11111111|11111110|000                     7fff0  [19]
']' ( 93)  |11111111|11100                             1ffc  [13]
'^' ( 94)  |11111111|111100                            3ffc  [14]
'_' ( 95)  |100010                                       22  [ 6]
'`' ( 96)  |11111111|1111101                           7ffd  [15]
'a' ( 97)  |00011                                         3  [ 5]
'b' ( 98)  |100011                                       23  [ 6]
'c' ( 99)  |00100                                         4  [ 5]
'd' (100)  |100100                                       24  [ 6]
'e' (101)  |00101                                         5  [ 5]
'f' (102)  |100101                                       25  [ 6]
'g' (103)  |100110                                       26  [ 6]
'h' (104)  |100111                                       27  [ 6]
'i' (105)  |00110                                         6  [ 5]
'j' (106)  |1110100                                      74  [ 7]
'k' (107)  |1110101                                      75  [ 7]
'l' (108)  |101000                                       28  [ 6]
'm' (109)  |101001                                       29  [ 6]
'n' (110)  |101010                                       2a  [ 6]
'o' (111)  |00111                                         7  [ 5]
'p' (112)  |101011                                       2b  [ 6]
'q' (113)  |1110110                                      76  [ 7]
'r' (114)  |101100                                       2c  [ 6]
's' (115)  |01000                                         8  [ 5]
't' (116)  |01001                                         9  [ 5]
'u' (117)  |101101                                       2d  [ 6]
'v' (118)  |1110111                                      77  [ 7]
'w' (119)  |1111000                                      78  [ 7]
'x' (120)  |1111001                                      79  [ 7]
'y' (121)  |1111010                                      7a  [ 7]
'z' (122)  |1111011                                      7b  [ 7]
'{' (123)  |11111111|1111110                           7ffe  [15]
'|' (124)  |11111111|100                                7fc  [11]
'}' (125)  |11111111|111101                            3ffd  [14]
'~' (126)  |11111111|11101                             1ffd  [13]
    (127)  |11111111|11111111|11111111|1100         ffffffc  [28]
    (128)  |11111111|11111110|0110                    fffe6  [20]
    (129)  |11111111|11111111|010010                 3fffd2  [22]
    (130)  |11111111|11111110|0111                    fffe7  [20]
    (131)  |11111111|11111110|1000                    fffe8  [20]
    (132)  |11111111|11111111|010011                 3fffd3  [22]
    (133)  |11111111|11111111|010100                 3fffd4  [22]
    (134)  |11111111|11111111|010101                 3fffd5  [22]
    (135)  |11111111|11111111|1011001                7fffd9  [23]
    (136)  |11111111|11111111|010110                 3fffd6  [22]
    (137)  |11111111|11111111|1011010                7fffda  [23]
    (138)  |11111111|11111111|1011011                7fffdb  [23]
    (139)  |11111111|11111111|1011100                7fffdc  [23]
    (140)  |11111111|11111111|1011101                7fffdd  [23]
    (141)  |11111111|11111111|1011110                7fffde  [23]
    (142)  |11111111|11111111|11101011               ffffeb  [24]
    (143)  |11111111|11111111|1011111                7fffdf  [23]
    (144)  |11111111|11111111|11101100               ffffec  [24]
    (145)  |11111111|11111111|11101101               ffffed  [24]
    (146)  |11111111|11111111|010111                 3fffd7  [22]
    (147)  |11111111|11111111|1100000                7fffe0  [23]
    (148)  |11111111|11111111|11101110               ffffee  [24]
    (149)  |11111111|11111111|1100001                7fffe1  [23]
    (150)  |11111111|11111111|1100010                7fffe2  [23]
    (151)  |11111111|11111111|1100011                7fffe3  [23]
    (152)  |11111111|11111111|1100100                7fffe4  [23]
    (153)  |11111111|11111110|11100                  1fffdc  [21]
    (154)  |11111111|11111111|011000                 3fffd8  [22]
    (155)  |11111111|11111111|1100101                7fffe5  [23]
    (156)  |11111111|11111111|011001                 3fffd9  [22]
    (157)  |11111111|11111111|1100110                7fffe6  [23]
    (158)  |11111111|11111111|1100111                7fffe7  [23]
    (159)  |11111111|11111111|11101111               ffffef  [24]
    (160)  |11111111|11111111|011010                 3fffda  [22]
    (161)  |11111111|11111110|11101                  1fffdd  [21]
    (162)  |11111111|11111110|1001                    fffe9  [20]
    (163)  |11111111|11111111|011011                 3fffdb  [22]
    (164)  |11111111|11111111|011100                 3fffdc  [22]
    (165)  |11111111|11111111|1101000                7fffe8  [23]
    (166)  |11111111|11111111|1101001                7fffe9  [23]
    (167)  |11111111|11111110|11110                  1fffde  [21]
    (168)  |11111111|11111111|1101010                7fffea  [23]
    (169)  |11111111|11111111|011101                 3fffdd  [22]
    (170)  |11111111|11111111|011110                 3fffde  [22]
    (171)  |11111111|11111111|11110000               fffff0  [24]
    (172)  |11111111|11111110|11111                  1fffdf  [21]
    (173)  |11111111|11111111|011111                 3fffdf  [22]
    (174)  |11111111|11111111|1101011                7fffeb  [23]
    (175)  |11111111|11111111|1101100                7fffec  [23]
    (176)  |11111111|11111111|00000                  1fffe0  [21]
    (177)  |11111111|11111111|00001                  1fffe1  [21]
    (178)  |11111111|11111111|100000                 3fffe0  [22]
    (179)  |11111111|11111111|00010                  1fffe2  [21]
    (180)  |11111111|11111111|1101101                7fffed  [23]
    (181)  |11111111|11111111|100001                 3fffe1  [22]
    (182)  |11111111|11111111|1101110                7fffee  [23]
    (183)  |11111111|11111111|1101111                7fffef  [23]
    (184)  |11111111|11111110|1010                    fffea  [20]
    (185)  |11111111|11111111|100010                 3fffe2  [22]
    (186)  |11111111|11111111|100011                 3fffe3  [22]
    (187)  |11111111|11111111|100100                 3fffe4  [22]
    (188)  |11111111|11111111|1110000                7ffff0  [23]
    (189)  |11111111|11111111|100101                 3fffe5  [22]
    (190)  |11111111|11111111|100110                 3fffe6  [22]
    (191)  |11111111|11111111|1110001                7ffff1  [23]
    (192)  |11111111|11111111|11111000|00           3ffffe0  [26]
    (193)  |11111111|11111111|11111000|01           3ffffe1  [26]
    (194)  |11111111|11111110|1011                    fffeb  [20]
    (195)  |11111111|11111110|001                     7fff1  [19]
    (196)  |11111111|11111111|100111                 3fffe7  [22]
    (197)  |11111111|11111111|1110010                7ffff2  [23]
    (198)  |11111111|11111111|101000                 3fffe8  [22]
    (199)  |11111111|11111111|11110110|0            1ffffec  [25]
    (200)  |11111111|11111111|11111000|10           3ffffe2  [26]
    (201)  |11111111|11111111|11111000|11           3ffffe3  [26]
    (202)  |11111111|11111111|11111001|00           3ffffe4  [26]
    (203)  |11111111|11111111|11111011|110          7ffffde  [27]
    (204)  |11111111|11111111|11111011|111          7ffffdf  [27]
    (205)  |11111111|11111111|11111001|01           3ffffe5  [26]
    (206)  |11111111|11111111|11110001               fffff1  [24]
    (207)  |11111111|11111111|11110110|1            1ffffed  [25]
    (208)  |11111111|11111110|010                     7fff2  [19]
    (209)  |11111111|11111111|00011                  1fffe3  [21]
    (210)  |11111111|11111111|11111001|10           3ffffe6  [26]
    (211)  |11111111|11111111|11111100|000          7ffffe0  [27]
    (212)  |11111111|11111111|11111100|001          7ffffe1  [27]
    (213)  |11111111|11111111|11111001|11           3ffffe7  [26]
    (214)  |11111111|11111111|11111100|010          7ffffe2  [27]
    (215)  |11111111|11111111|11110010               fffff2  [24]
    (216)  |11111111|11111111|00100                  1fffe4  [21]
    (217)  |11111111|11111111|00101                  1fffe5  [21]
    (218)  |11111111|11111111|11111010|00           3ffffe8  [26]
    (219)  |11111111|11111111|11111010|01           3ffffe9  [26]
    (220)  |11111111|11111111|11111111|1101         ffffffd  [28]
    (221)  |11111111|11111111|11111100|011          7ffffe3  [27]
    (222)  |11111111|11111111|11111100|100          7ffffe4  [27]
    (223)  |11111111|11111111|11111100|101          7ffffe5  [27]
    (224)  |11111111|11111110|1100                    fffec  [20]
    (225)  |11111111|11111111|11110011               fffff3  [24]
    (226)  |11111111|11111110|1101                    fffed  [20]
    (227)  |11111111|11111111|00110                  1fffe6  [21]
    (228)  |11111111|11111111|101001                 3fffe9  [22]
    (229)  |11111111|11111111|00111                  1fffe7  [21]
    (230)  |11111111|11111111|01000                  1fffe8  [21]
    (231)  |11111111|11111111|1110011                7ffff3  [23]
    (232)  |11111111|11111111|101010                 3fffea  [22]
    (233)  |11111111|11111111|101011                 3fffeb  [22]
    (234)  |11111111|11111111|11110111|0            1ffffee  [25]
    (235)  |11111111|11111111|11110111|1            1ffffef  [25]
    (236)  |11111111|11111111|11110100               fffff4  [24]
    (237)  |11111111|11111111|11110101               fffff5  [24]
    (238)  |11111111|11111111|11111010|10           3ffffea  [26]
    (239)  |11111111|11111111|1110100                7ffff4  [23]
    (240)  |11111111|11111111|11111010|11           3ffffeb  [26]
    (241)  |11111111|11111111|11111100|110          7ffffe6  [27]
    (242)  |11111111|11111111|11111011|00           3ffffec  [26]
    (243)  |11111111|11111111|11111011|01           3ffffed  [26]
    (244)  |11111111|11111111|11111100|111          7ffffe7  [27]
    (245)  |11111111|11111111|11111101|000          7ffffe8  [27]
    (246)  |11111111|11111111|11111101|001          7ffffe9  [27]
    (247)  |11111111|11111111|11111101|010          7ffffea  [27]
    (248)  |11111111|11111111|11111101|011          7ffffeb  [27]
    (249)  |11111111|11111111|11111111|1110         ffffffe  [28]
    (250)  |11111111|11111111|11111101|100          7ffffec  [27]
    (251)  |11111111|11111111|11111101|101          7ffffed  [27]
    (252)  |11111111|11111111|11111101|110          7ffffee  [27]
    (253)  |11111111|11111111|11111101|111          7ffffef  [27]
    (254)  |11111111|11111111|11111110|000          7fffff0  [27]
    (255)  |11111111|11111111|11111011|10           3ffffee  [26]
EOS (256)  |11111111|11111111|11111111|111111      3fffffff  [30]
</pre></div>
      <div id="examples">
         <h1 id="rfc.section.D"><a href="#rfc.section.D">D.</a>&nbsp;<a href="#examples">Examples</a></h1>
         <p id="rfc.section.D.p.1">A number of examples are worked through here, covering integer encoding, header field representation, and the encoding of
            whole sets of header fields, for both requests and responses, and with and without Huffman coding.
         </p>
         <div id="integer.representation.examples">
            <h2 id="rfc.section.D.1"><a href="#rfc.section.D.1">D.1</a>&nbsp;<a href="#integer.representation.examples">Integer Representation Examples</a></h2>
            <p id="rfc.section.D.1.p.1">This section shows the representation of integer values in details (see <a href="#integer.representation" title="Integer representation">Section&nbsp;6.1</a>).
            </p>
            <div id="integer.representation.example1">
               <h3 id="rfc.section.D.1.1"><a href="#rfc.section.D.1.1">D.1.1</a>&nbsp;<a href="#integer.representation.example1">Example 1: Encoding 10 Using a 5-bit Prefix</a></h3>
               <p id="rfc.section.D.1.1.p.1">The value 10 is to be encoded with a 5-bit prefix. </p>
               <ul>
                  <li>10 is less than 31 (2<sup>5</sup> - 1) and is represented using the 5-bit prefix.
                  </li>
               </ul>
               <div id="rfc.figure.u.16"></div><pre>  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| X | X | X | 0 | 1 | 0 | 1 | 0 |   10 stored on 5 bits
+---+---+---+---+---+---+---+---+
</pre></div>
            <div id="integer.representation.example2">
               <h3 id="rfc.section.D.1.2"><a href="#rfc.section.D.1.2">D.1.2</a>&nbsp;<a href="#integer.representation.example2">Example 2: Encoding 1337 Using a 5-bit Prefix</a></h3>
               <p id="rfc.section.D.1.2.p.1">The value I=1337 is to be encoded with a 5-bit prefix. </p>
               <ul class="empty">
                  <li>1337 is greater than 31 (2<sup>5</sup> - 1).
                  </li>
                  <li>
                     <ul class="empty">
                        <li>The 5-bit prefix is filled with its max value (31).</li>
                     </ul> 
                  </li>
                  <li>I = 1337 - (2<sup>5</sup> - 1) = 1306.
                  </li>
                  <li>
                     <ul class="empty">
                        <li>I (1306) is greater than or equal to 128, the while loop body executes:</li>
                        <li>
                           <ul class="empty">
                              <li>I % 128 == 26</li>
                              <li>26 + 128 == 154</li>
                              <li>154 is encoded in 8 bits as: 10011010</li>
                              <li>I is set to 10 (1306 / 128 == 10)</li>
                              <li>I is no longer greater than or equal to 128, the while loop terminates.</li>
                           </ul> 
                        </li>
                        <li>I, now 10, is encoded on 8 bits as: 00001010.</li>
                     </ul> 
                  </li>
                  <li>The process ends.</li>
               </ul>
               <div id="rfc.figure.u.17"></div><pre>  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| X | X | X | 1 | 1 | 1 | 1 | 1 |  Prefix = 31, I = 1306
| 1 | 0 | 0 | 1 | 1 | 0 | 1 | 0 |  1306&gt;=128, encode(154), I=1306/128
| 0 | 0 | 0 | 0 | 1 | 0 | 1 | 0 |  10&lt;128, encode(10), done
+---+---+---+---+---+---+---+---+
</pre></div>
            <div id="integer.representation.example3">
               <h3 id="rfc.section.D.1.3"><a href="#rfc.section.D.1.3">D.1.3</a>&nbsp;<a href="#integer.representation.example3">Example 3: Encoding 42 Starting at an Octet Boundary</a></h3>
               <p id="rfc.section.D.1.3.p.1">The value 42 is to be encoded starting at an octet-boundary. This implies that a 8-bit prefix is used. </p>
               <ul>
                  <li>42 is less than 255 (2<sup>8</sup> - 1) and is represented using the 8-bit prefix.
                  </li>
               </ul>
               <div id="rfc.figure.u.18"></div><pre>  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0 | 0 | 1 | 0 | 1 | 0 | 1 | 0 |   42 stored on 8 bits
+---+---+---+---+---+---+---+---+
</pre></div>
         </div>
         <div id="header.field.representation.examples">
            <h2 id="rfc.section.D.2"><a href="#rfc.section.D.2">D.2</a>&nbsp;<a href="#header.field.representation.examples">Header Field Representation Examples</a></h2>
            <p id="rfc.section.D.2.p.1">This section shows several independent representation examples.</p>
            <div>
               <h3 id="rfc.section.D.2.1"><a href="#rfc.section.D.2.1">D.2.1</a>&nbsp;Literal Header Field with Indexing
               </h3>
               <p id="rfc.section.D.2.1.p.1">The header field representation uses a literal name and a literal value. The header field is added to the header table.</p>
               <p id="rfc.section.D.2.1.p.2"></p><span id="rfc.figure.u.19"></span><p>Header set to encode:</p><pre>custom-key: custom-header</pre><p id="rfc.section.D.2.1.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.2.1.p.4"></p><span id="rfc.figure.u.20"></span><p>Hex dump of encoded data:</p><pre>400a 6375 7374 6f6d 2d6b 6579 0d63 7573 | @.custom-key.cus
746f 6d2d 6865 6164 6572                | tom-header</pre><p id="rfc.section.D.2.1.p.5"></p><span id="rfc.figure.u.21"></span><p>Decoding process:</p><pre>40                                      | == Literal indexed ==
0a                                      |   Literal name (len = 10)
6375 7374 6f6d 2d6b 6579                | custom-key
0d                                      |   Literal value (len = 13)
6375 7374 6f6d 2d68 6561 6465 72        | custom-header
                                        | -&gt; custom-key: custom-head\
                                        |   er</pre><p id="rfc.section.D.2.1.p.6"></p><span id="rfc.figure.u.22"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  55) custom-key: custom-header
      Table size:  55</pre><p id="rfc.section.D.2.1.p.7"></p><span id="rfc.figure.u.23"></span><p>Decoded header set:</p><pre>custom-key: custom-header</pre></div>
            <div>
               <h3 id="rfc.section.D.2.2"><a href="#rfc.section.D.2.2">D.2.2</a>&nbsp;Literal Header Field without Indexing
               </h3>
               <p id="rfc.section.D.2.2.p.1">The header field representation uses an indexed name and a literal value. The header field is not added to the header table.</p>
               <p id="rfc.section.D.2.2.p.2"></p><span id="rfc.figure.u.24"></span><p>Header set to encode:</p><pre>:path: /sample/path</pre><p id="rfc.section.D.2.2.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.2.2.p.4"></p><span id="rfc.figure.u.25"></span><p>Hex dump of encoded data:</p><pre>040c 2f73 616d 706c 652f 7061 7468      | ../sample/path</pre><p id="rfc.section.D.2.2.p.5"></p><span id="rfc.figure.u.26"></span><p>Decoding process:</p><pre>04                                      | == Literal not indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :path
0c                                      |   Literal value (len = 12)
2f73 616d 706c 652f 7061 7468           | /sample/path
                                        | -&gt; :path: /sample/path</pre><p id="rfc.section.D.2.2.p.6">Header table (after decoding): empty.</p>
               <p id="rfc.section.D.2.2.p.7"></p><span id="rfc.figure.u.27"></span><p>Decoded header set:</p><pre>:path: /sample/path</pre></div>
            <div>
               <h3 id="rfc.section.D.2.3"><a href="#rfc.section.D.2.3">D.2.3</a>&nbsp;Literal Header Field never Indexed
               </h3>
               <p id="rfc.section.D.2.3.p.1">The header field representation uses a literal name and a literal value. The header field is not added to the header table,
                  and must use the same representation if re-encoded by an intermediary.
               </p>
               <p id="rfc.section.D.2.3.p.2"></p><span id="rfc.figure.u.28"></span><p>Header set to encode:</p><pre>password: secret</pre><p id="rfc.section.D.2.3.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.2.3.p.4"></p><span id="rfc.figure.u.29"></span><p>Hex dump of encoded data:</p><pre>1008 7061 7373 776f 7264 0673 6563 7265 | ..password.secre
74                                      | t</pre><p id="rfc.section.D.2.3.p.5"></p><span id="rfc.figure.u.30"></span><p>Decoding process:</p><pre>10                                      | == Literal never indexed ==
08                                      |   Literal name (len = 8)
7061 7373 776f 7264                     | password
06                                      |   Literal value (len = 6)
7365 6372 6574                          | secret
                                        | -&gt; password: secret</pre><p id="rfc.section.D.2.3.p.6">Header table (after decoding): empty.</p>
               <p id="rfc.section.D.2.3.p.7"></p><span id="rfc.figure.u.31"></span><p>Decoded header set:</p><pre>password: secret</pre></div>
            <div>
               <h3 id="rfc.section.D.2.4"><a href="#rfc.section.D.2.4">D.2.4</a>&nbsp;Indexed Header Field
               </h3>
               <p id="rfc.section.D.2.4.p.1">The header field representation uses an indexed header field, from the static table. Upon using it, the static table entry
                  is copied into the header table.
               </p>
               <p id="rfc.section.D.2.4.p.2"></p><span id="rfc.figure.u.32"></span><p>Header set to encode:</p><pre>:method: GET</pre><p id="rfc.section.D.2.4.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.2.4.p.4"></p><span id="rfc.figure.u.33"></span><p>Hex dump of encoded data:</p><pre>82                                      | .</pre><p id="rfc.section.D.2.4.p.5"></p><span id="rfc.figure.u.34"></span><p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET</pre><p id="rfc.section.D.2.4.p.6"></p><span id="rfc.figure.u.35"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  42) :method: GET
      Table size:  42</pre><p id="rfc.section.D.2.4.p.7"></p><span id="rfc.figure.u.36"></span><p>Decoded header set:</p><pre>:method: GET</pre></div>
            <div>
               <h3 id="rfc.section.D.2.5"><a href="#rfc.section.D.2.5">D.2.5</a>&nbsp;Indexed Header Field from Static Table
               </h3>
               <p id="rfc.section.D.2.5.p.1">The header field representation uses an indexed header field, from the static table. In this example, the HTTP/2 setting SETTINGS_HEADER_TABLE_SIZE
                  is set to 0, therefore, the entry is not copied into the header table.
               </p>
               <p id="rfc.section.D.2.5.p.2"></p><span id="rfc.figure.u.37"></span><p>Header set to encode:</p><pre>:method: GET</pre><p id="rfc.section.D.2.5.p.3">Reference set: empty.</p>
               <p id="rfc.section.D.2.5.p.4"></p><span id="rfc.figure.u.38"></span><p>Hex dump of encoded data:</p><pre>82                                      | .</pre><p id="rfc.section.D.2.5.p.5"></p><span id="rfc.figure.u.39"></span><p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET</pre><p id="rfc.section.D.2.5.p.6">Header table (after decoding): empty.</p>
               <p id="rfc.section.D.2.5.p.7"></p><span id="rfc.figure.u.40"></span><p>Decoded header set:</p><pre>:method: GET</pre></div>
         </div>
         <div id="request.examples.without.huffman.coding">
            <h2 id="rfc.section.D.3"><a href="#rfc.section.D.3">D.3</a>&nbsp;<a href="#request.examples.without.huffman.coding">Request Examples without Huffman Coding</a></h2>
            <p id="rfc.section.D.3.p.1">This section shows several consecutive header sets, corresponding to HTTP requests, on the same connection.</p>
            <div>
               <h3 id="rfc.section.D.3.1"><a href="#rfc.section.D.3.1">D.3.1</a>&nbsp;First Request
               </h3>
               <p id="rfc.section.D.3.1.p.1"></p><span id="rfc.figure.u.41"></span><p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre><p id="rfc.section.D.3.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.3.1.p.3"></p><span id="rfc.figure.u.42"></span><p>Hex dump of encoded data:</p><pre>8287 8644 0f77 7777 2e65 7861 6d70 6c65 | ...D.www.example
2e63 6f6d                               | .com</pre><p id="rfc.section.D.3.1.p.4"></p><span id="rfc.figure.u.43"></span><p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
87                                      | == Indexed - Add ==
                                        |   idx = 7
                                        | -&gt; :scheme: http
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :path: /
44                                      | == Literal indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :authority
0f                                      |   Literal value (len = 15)
7777 772e 6578 616d 706c 652e 636f 6d   | www.example.com
                                        | -&gt; :authority: www.example\
                                        |   .com</pre><p id="rfc.section.D.3.1.p.5"></p><span id="rfc.figure.u.44"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  57) :authority: www.example.com
[  2] (s =  38) :path: /
[  3] (s =  43) :scheme: http
[  4] (s =  42) :method: GET
      Table size: 180</pre><p id="rfc.section.D.3.1.p.6"></p><span id="rfc.figure.u.45"></span><p>Decoded header set:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.3.2"><a href="#rfc.section.D.3.2">D.3.2</a>&nbsp;Second Request
               </h3>
               <p id="rfc.section.D.3.2.p.1">This request takes advantage of the differential encoding of header sets.</p>
               <p id="rfc.section.D.3.2.p.2"></p><span id="rfc.figure.u.46"></span><p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre><p id="rfc.section.D.3.2.p.3"></p><span id="rfc.figure.u.47"></span><p>Reference set:</p><pre>[  1] :authority: www.example.com
[  2] :path: /
[  3] :scheme: http
[  4] :method: GET</pre><p id="rfc.section.D.3.2.p.4"></p><span id="rfc.figure.u.48"></span><p>Hex dump of encoded data:</p><pre>5c08 6e6f 2d63 6163 6865                | \.no-cache</pre><p id="rfc.section.D.3.2.p.5"></p><span id="rfc.figure.u.49"></span><p>Decoding process:</p><pre>5c                                      | == Literal indexed ==
                                        |   Indexed name (idx = 28)
                                        |     cache-control
08                                      |   Literal value (len = 8)
6e6f 2d63 6163 6865                     | no-cache
                                        | -&gt; cache-control: no-cache</pre><p id="rfc.section.D.3.2.p.6"></p><span id="rfc.figure.u.50"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  53) cache-control: no-cache
[  2] (s =  57) :authority: www.example.com
[  3] (s =  38) :path: /
[  4] (s =  43) :scheme: http
[  5] (s =  42) :method: GET
      Table size: 233</pre><p id="rfc.section.D.3.2.p.7"></p><span id="rfc.figure.u.51"></span><p>Decoded header set:</p><pre>cache-control: no-cache
:authority: www.example.com
:path: /
:scheme: http
:method: GET</pre></div>
            <div>
               <h3 id="rfc.section.D.3.3"><a href="#rfc.section.D.3.3">D.3.3</a>&nbsp;Third Request
               </h3>
               <p id="rfc.section.D.3.3.p.1">This request has not enough headers in common with the previous request to take advantage of the differential encoding. Therefore,
                  the reference set is emptied before encoding the header fields.
               </p>
               <p id="rfc.section.D.3.3.p.2"></p><span id="rfc.figure.u.52"></span><p>Header set to encode:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre><p id="rfc.section.D.3.3.p.3"></p><span id="rfc.figure.u.53"></span><p>Reference set:</p><pre>[  1] cache-control: no-cache
[  2] :authority: www.example.com
[  3] :path: /
[  4] :scheme: http
[  5] :method: GET</pre><p id="rfc.section.D.3.3.p.4"></p><span id="rfc.figure.u.54"></span><p>Hex dump of encoded data:</p><pre>3085 8c8b 8440 0a63 7573 746f 6d2d 6b65 | 0....@.custom-ke
790c 6375 7374 6f6d 2d76 616c 7565      | y.custom-value</pre><p id="rfc.section.D.3.3.p.5"></p><span id="rfc.figure.u.55"></span><p>Decoding process:</p><pre>30                                      | == Empty reference set ==
                                        |   idx = 0
                                        |   flag = 1
85                                      | == Indexed - Add ==
                                        |   idx = 5
                                        | -&gt; :method: GET
8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | -&gt; :scheme: https
8b                                      | == Indexed - Add ==
                                        |   idx = 11
                                        | -&gt; :path: /index.html
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :authority: www.example\
                                        |   .com
40                                      | == Literal indexed ==
0a                                      |   Literal name (len = 10)
6375 7374 6f6d 2d6b 6579                | custom-key
0c                                      |   Literal value (len = 12)
6375 7374 6f6d 2d76 616c 7565           | custom-value
                                        | -&gt; custom-key: custom-valu\
                                        |   e</pre><p id="rfc.section.D.3.3.p.6"></p><span id="rfc.figure.u.56"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  54) custom-key: custom-value
[  2] (s =  48) :path: /index.html
[  3] (s =  44) :scheme: https
[  4] (s =  53) cache-control: no-cache
[  5] (s =  57) :authority: www.example.com
[  6] (s =  38) :path: /
[  7] (s =  43) :scheme: http
[  8] (s =  42) :method: GET
      Table size: 379</pre><p id="rfc.section.D.3.3.p.7"></p><span id="rfc.figure.u.57"></span><p>Decoded header set:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></div>
         </div>
         <div id="request.examples.with.huffman.coding">
            <h2 id="rfc.section.D.4"><a href="#rfc.section.D.4">D.4</a>&nbsp;<a href="#request.examples.with.huffman.coding">Request Examples with Huffman Coding</a></h2>
            <p id="rfc.section.D.4.p.1">This section shows the same examples as the previous section, but using Huffman encoding for the literal values.</p>
            <div>
               <h3 id="rfc.section.D.4.1"><a href="#rfc.section.D.4.1">D.4.1</a>&nbsp;First Request
               </h3>
               <p id="rfc.section.D.4.1.p.1"></p><span id="rfc.figure.u.58"></span><p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre><p id="rfc.section.D.4.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.4.1.p.3"></p><span id="rfc.figure.u.59"></span><p>Hex dump of encoded data:</p><pre>8287 8644 8cf1 e3c2 e5f2 3a6b a0ab 90f4 | ...D......:k....
ff                                      | .</pre><p id="rfc.section.D.4.1.p.4"></p><span id="rfc.figure.u.60"></span><p>Decoding process:</p><pre>82                                      | == Indexed - Add ==
                                        |   idx = 2
                                        | -&gt; :method: GET
87                                      | == Indexed - Add ==
                                        |   idx = 7
                                        | -&gt; :scheme: http
86                                      | == Indexed - Add ==
                                        |   idx = 6
                                        | -&gt; :path: /
44                                      | == Literal indexed ==
                                        |   Indexed name (idx = 4)
                                        |     :authority
8c                                      |   Literal value (len = 15)
                                        |     Huffman encoded:
f1e3 c2e5 f23a 6ba0 ab90 f4ff           | .....:k.....
                                        |     Decoded:
                                        | www.example.com
                                        | -&gt; :authority: www.example\
                                        |   .com</pre><p id="rfc.section.D.4.1.p.5"></p><span id="rfc.figure.u.61"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  57) :authority: www.example.com
[  2] (s =  38) :path: /
[  3] (s =  43) :scheme: http
[  4] (s =  42) :method: GET
      Table size: 180</pre><p id="rfc.section.D.4.1.p.6"></p><span id="rfc.figure.u.62"></span><p>Decoded header set:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.4.2"><a href="#rfc.section.D.4.2">D.4.2</a>&nbsp;Second Request
               </h3>
               <p id="rfc.section.D.4.2.p.1">This request takes advantage of the differential encoding of header sets.</p>
               <p id="rfc.section.D.4.2.p.2"></p><span id="rfc.figure.u.63"></span><p>Header set to encode:</p><pre>:method: GET
:scheme: http
:path: /
:authority: www.example.com
cache-control: no-cache</pre><p id="rfc.section.D.4.2.p.3"></p><span id="rfc.figure.u.64"></span><p>Reference set:</p><pre>[  1] :authority: www.example.com
[  2] :path: /
[  3] :scheme: http
[  4] :method: GET</pre><p id="rfc.section.D.4.2.p.4"></p><span id="rfc.figure.u.65"></span><p>Hex dump of encoded data:</p><pre>5c86 a8eb 1064 9cbf                     | \....d..</pre><p id="rfc.section.D.4.2.p.5"></p><span id="rfc.figure.u.66"></span><p>Decoding process:</p><pre>5c                                      | == Literal indexed ==
                                        |   Indexed name (idx = 28)
                                        |     cache-control
86                                      |   Literal value (len = 8)
                                        |     Huffman encoded:
a8eb 1064 9cbf                          | ...d..
                                        |     Decoded:
                                        | no-cache
                                        | -&gt; cache-control: no-cache</pre><p id="rfc.section.D.4.2.p.6"></p><span id="rfc.figure.u.67"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  53) cache-control: no-cache
[  2] (s =  57) :authority: www.example.com
[  3] (s =  38) :path: /
[  4] (s =  43) :scheme: http
[  5] (s =  42) :method: GET
      Table size: 233</pre><p id="rfc.section.D.4.2.p.7"></p><span id="rfc.figure.u.68"></span><p>Decoded header set:</p><pre>cache-control: no-cache
:authority: www.example.com
:path: /
:scheme: http
:method: GET</pre></div>
            <div>
               <h3 id="rfc.section.D.4.3"><a href="#rfc.section.D.4.3">D.4.3</a>&nbsp;Third Request
               </h3>
               <p id="rfc.section.D.4.3.p.1">This request has not enough headers in common with the previous request to take advantage of the differential encoding. Therefore,
                  the reference set is emptied before encoding the header fields.
               </p>
               <p id="rfc.section.D.4.3.p.2"></p><span id="rfc.figure.u.69"></span><p>Header set to encode:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre><p id="rfc.section.D.4.3.p.3"></p><span id="rfc.figure.u.70"></span><p>Reference set:</p><pre>[  1] cache-control: no-cache
[  2] :authority: www.example.com
[  3] :path: /
[  4] :scheme: http
[  5] :method: GET</pre><p id="rfc.section.D.4.3.p.4"></p><span id="rfc.figure.u.71"></span><p>Hex dump of encoded data:</p><pre>3085 8c8b 8440 8825 a849 e95b a97d 7f89 | 0....@.%.I.[.}..
25a8 49e9 5bb8 e8b4 bf                  | %.I.[....</pre><p id="rfc.section.D.4.3.p.5"></p><span id="rfc.figure.u.72"></span><p>Decoding process:</p><pre>30                                      | == Empty reference set ==
                                        |   idx = 0
                                        |   flag = 1
85                                      | == Indexed - Add ==
                                        |   idx = 5
                                        | -&gt; :method: GET
8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | -&gt; :scheme: https
8b                                      | == Indexed - Add ==
                                        |   idx = 11
                                        | -&gt; :path: /index.html
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; :authority: www.example\
                                        |   .com
40                                      | == Literal indexed ==
88                                      |   Literal name (len = 10)
                                        |     Huffman encoded:
25a8 49e9 5ba9 7d7f                     | %.I.[.}.
                                        |     Decoded:
                                        | custom-key
89                                      |   Literal value (len = 12)
                                        |     Huffman encoded:
25a8 49e9 5bb8 e8b4 bf                  | %.I.[....
                                        |     Decoded:
                                        | custom-value
                                        | -&gt; custom-key: custom-valu\
                                        |   e</pre><p id="rfc.section.D.4.3.p.6"></p><span id="rfc.figure.u.73"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  54) custom-key: custom-value
[  2] (s =  48) :path: /index.html
[  3] (s =  44) :scheme: https
[  4] (s =  53) cache-control: no-cache
[  5] (s =  57) :authority: www.example.com
[  6] (s =  38) :path: /
[  7] (s =  43) :scheme: http
[  8] (s =  42) :method: GET
      Table size: 379</pre><p id="rfc.section.D.4.3.p.7"></p><span id="rfc.figure.u.74"></span><p>Decoded header set:</p><pre>:method: GET
:scheme: https
:path: /index.html
:authority: www.example.com
custom-key: custom-value</pre></div>
         </div>
         <div id="response.examples.without.huffman.coding">
            <h2 id="rfc.section.D.5"><a href="#rfc.section.D.5">D.5</a>&nbsp;<a href="#response.examples.without.huffman.coding">Response Examples without Huffman Coding</a></h2>
            <p id="rfc.section.D.5.p.1">This section shows several consecutive header sets, corresponding to HTTP responses, on the same connection. The HTTP/2 setting
               SETTINGS_HEADER_TABLE_SIZE is set to the value of 256 octets, causing some evictions to occur.
            </p>
            <div>
               <h3 id="rfc.section.D.5.1"><a href="#rfc.section.D.5.1">D.5.1</a>&nbsp;First Response
               </h3>
               <p id="rfc.section.D.5.1.p.1"></p><span id="rfc.figure.u.75"></span><p>Header set to encode:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.5.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.5.1.p.3"></p><span id="rfc.figure.u.76"></span><p>Hex dump of encoded data:</p><pre>4803 3330 3259 0770 7269 7661 7465 631d | H.302Y.privatec.
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3120 474d 5471 1768 |  20:13:21 GMTq.h
7474 7073 3a2f 2f77 7777 2e65 7861 6d70 | ttps://www.examp
6c65 2e63 6f6d                          | le.com</pre><p id="rfc.section.D.5.1.p.4"></p><span id="rfc.figure.u.77"></span><p>Decoding process:</p><pre>48                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
03                                      |   Literal value (len = 3)
3330 32                                 | 302
                                        | -&gt; :status: 302
59                                      | == Literal indexed ==
                                        |   Indexed name (idx = 25)
                                        |     cache-control
07                                      |   Literal value (len = 7)
7072 6976 6174 65                       | private
                                        | -&gt; cache-control: private
63                                      | == Literal indexed ==
                                        |   Indexed name (idx = 35)
                                        |     date
1d                                      |   Literal value (len = 29)
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3120 474d 54        |  20:13:21 GMT
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
71                                      | == Literal indexed ==
                                        |   Indexed name (idx = 49)
                                        |     location
17                                      |   Literal value (len = 23)
6874 7470 733a 2f2f 7777 772e 6578 616d | https://www.exam
706c 652e 636f 6d                       | ple.com
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre><p id="rfc.section.D.5.1.p.5"></p><span id="rfc.figure.u.78"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  63) location: https://www.example.com
[  2] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] (s =  52) cache-control: private
[  4] (s =  42) :status: 302
      Table size: 222</pre><p id="rfc.section.D.5.1.p.6"></p><span id="rfc.figure.u.79"></span><p>Decoded header set:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.5.2"><a href="#rfc.section.D.5.2">D.5.2</a>&nbsp;Second Response
               </h3>
               <p id="rfc.section.D.5.2.p.1">The (":status", "302") header field is evicted from the header table to free space to allow adding the (":status", "200")
                  header field, copied from the static table into the header table. The (":status", "302") header field doesn't need to be removed
                  from the reference set as it is evicted from the header table.
               </p>
               <p id="rfc.section.D.5.2.p.2"></p><span id="rfc.figure.u.80"></span><p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.5.2.p.3"></p><span id="rfc.figure.u.81"></span><p>Reference set:</p><pre>[  1] location: https://www.example.com
[  2] date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] cache-control: private
[  4] :status: 302</pre><p id="rfc.section.D.5.2.p.4"></p><span id="rfc.figure.u.82"></span><p>Hex dump of encoded data:</p><pre>8c                                      | .</pre><p id="rfc.section.D.5.2.p.5"></p><span id="rfc.figure.u.83"></span><p>Decoding process:</p><pre>8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | - evict: :status: 302
                                        | -&gt; :status: 200</pre><p id="rfc.section.D.5.2.p.6"></p><span id="rfc.figure.u.84"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  42) :status: 200
[  2] (s =  63) location: https://www.example.com
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] (s =  52) cache-control: private
      Table size: 222</pre><p id="rfc.section.D.5.2.p.7"></p><span id="rfc.figure.u.85"></span><p>Decoded header set:</p><pre>:status: 200
location: https://www.example.com
date: Mon, 21 Oct 2013 20:13:21 GMT
cache-control: private</pre></div>
            <div>
               <h3 id="rfc.section.D.5.3"><a href="#rfc.section.D.5.3">D.5.3</a>&nbsp;Third Response
               </h3>
               <p id="rfc.section.D.5.3.p.1">Several header fields are evicted from the header table during the processing of this header set. Before evicting a header
                  belonging to the reference set, it is emitted, by coding it twice as an Indexed Representation. The first representation removes
                  the header field from the reference set, the second one adds it again to the reference set, also emitting it.
               </p>
               <p id="rfc.section.D.5.3.p.2"></p><span id="rfc.figure.u.86"></span><p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre><p id="rfc.section.D.5.3.p.3"></p><span id="rfc.figure.u.87"></span><p>Reference set:</p><pre>[  1] :status: 200
[  2] location: https://www.example.com
[  3] date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] cache-control: private</pre><p id="rfc.section.D.5.3.p.4"></p><span id="rfc.figure.u.88"></span><p>Hex dump of encoded data:</p><pre>8484 431d 4d6f 6e2c 2032 3120 4f63 7420 | ..C.Mon, 21 Oct
3230 3133 2032 303a 3133 3a32 3220 474d | 2013 20:13:22 GM
545e 0467 7a69 7084 8483 837b 3866 6f6f | T^.gzip....{8foo
3d41 5344 4a4b 4851 4b42 5a58 4f51 5745 | =ASDJKHQKBZXOQWE
4f50 4955 4158 5157 454f 4955 3b20 6d61 | OPIUAXQWEOIU; ma
782d 6167 653d 3336 3030 3b20 7665 7273 | x-age=3600; vers
696f 6e3d 31                            | ion=1</pre><p id="rfc.section.D.5.3.p.5"></p><span id="rfc.figure.u.89"></span><p>Decoding process:</p><pre>84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
43                                      | == Literal indexed ==
                                        |   Indexed name (idx = 3)
                                        |     date
1d                                      |   Literal value (len = 29)
4d6f 6e2c 2032 3120 4f63 7420 3230 3133 | Mon, 21 Oct 2013
2032 303a 3133 3a32 3220 474d 54        |  20:13:22 GMT
                                        | - evict: cache-control: pr\
                                        |   ivate
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:22 GMT
5e                                      | == Literal indexed ==
                                        |   Indexed name (idx = 30)
                                        |     content-encoding
04                                      |   Literal value (len = 4)
677a 6970                               | gzip
                                        | - evict: date: Mon, 21 Oct\
                                        |    2013 20:13:21 GMT
                                        | -&gt; content-encoding: gzip
84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
83                                      | == Indexed - Remove ==
                                        |   idx = 3
                                        | -&gt; :status: 200
83                                      | == Indexed - Add ==
                                        |   idx = 3
                                        | -&gt; :status: 200
7b                                      | == Literal indexed ==
                                        |   Indexed name (idx = 59)
                                        |     set-cookie
38                                      |   Literal value (len = 56)
666f 6f3d 4153 444a 4b48 514b 425a 584f | foo=ASDJKHQKBZXO
5157 454f 5049 5541 5851 5745 4f49 553b | QWEOPIUAXQWEOIU;
206d 6178 2d61 6765 3d33 3630 303b 2076 |  max-age=3600; v
6572 7369 6f6e 3d31                     | ersion=1
                                        | - evict: location: https:/\
                                        |   /www.example.com
                                        | - evict: :status: 200
                                        | -&gt; set-cookie: foo=ASDJKHQ\
                                        |   KBZXOQWEOPIUAXQWEOIU; ma\
                                        |   x-age=3600; version=1</pre><p id="rfc.section.D.5.3.p.6"></p><span id="rfc.figure.u.90"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  98) set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age\
                 =3600; version=1
[  2] (s =  52) content-encoding: gzip
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:22 GMT
      Table size: 215</pre><p id="rfc.section.D.5.3.p.7"></p><span id="rfc.figure.u.91"></span><p>Decoded header set:</p><pre>cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
content-encoding: gzip
location: https://www.example.com
:status: 200
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></div>
         </div>
         <div id="response.examples.with.huffman.coding">
            <h2 id="rfc.section.D.6"><a href="#rfc.section.D.6">D.6</a>&nbsp;<a href="#response.examples.with.huffman.coding">Response Examples with Huffman Coding</a></h2>
            <p id="rfc.section.D.6.p.1">This section shows the same examples as the previous section, but using Huffman encoding for the literal values. The HTTP/2
               setting SETTINGS_HEADER_TABLE_SIZE is set to the value of 256 octets, causing some evictions to occur. The eviction mechanism
               uses the length of the decoded literal values, so the same evictions occurs as in the previous section.
            </p>
            <div>
               <h3 id="rfc.section.D.6.1"><a href="#rfc.section.D.6.1">D.6.1</a>&nbsp;First Response
               </h3>
               <p id="rfc.section.D.6.1.p.1"></p><span id="rfc.figure.u.92"></span><p>Header set to encode:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.6.1.p.2">Reference set: empty.</p>
               <p id="rfc.section.D.6.1.p.3"></p><span id="rfc.figure.u.93"></span><p>Hex dump of encoded data:</p><pre>4882 6402 5985 aec3 771a 4b63 96d0 7abe | H.d.Y...w.Kc..z.
9410 54d4 44a8 2005 9504 0b81 66e0 82a6 | ..T.D. .....f...
2d1b ff71 919d 29ad 1718 63c7 8f0b 97c8 | -..q..)...c.....
e9ae 82ae 43d3                          | ....C.</pre><p id="rfc.section.D.6.1.p.4"></p><span id="rfc.figure.u.94"></span><p>Decoding process:</p><pre>48                                      | == Literal indexed ==
                                        |   Indexed name (idx = 8)
                                        |     :status
82                                      |   Literal value (len = 3)
                                        |     Huffman encoded:
6402                                    | d.
                                        |     Decoded:
                                        | 302
                                        | -&gt; :status: 302
59                                      | == Literal indexed ==
                                        |   Indexed name (idx = 25)
                                        |     cache-control
85                                      |   Literal value (len = 7)
                                        |     Huffman encoded:
aec3 771a 4b                            | ..w.K
                                        |     Decoded:
                                        | private
                                        | -&gt; cache-control: private
63                                      | == Literal indexed ==
                                        |   Indexed name (idx = 35)
                                        |     date
96                                      |   Literal value (len = 29)
                                        |     Huffman encoded:
d07a be94 1054 d444 a820 0595 040b 8166 | .z...T.D. .....f
e082 a62d 1bff                          | ...-..
                                        |     Decoded:
                                        | Mon, 21 Oct 2013 20:13:21 \
                                        | GMT
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:21 GMT
71                                      | == Literal indexed ==
                                        |   Indexed name (idx = 49)
                                        |     location
91                                      |   Literal value (len = 23)
                                        |     Huffman encoded:
9d29 ad17 1863 c78f 0b97 c8e9 ae82 ae43 | .)...c.........C
d3                                      | .
                                        |     Decoded:
                                        | https://www.example.com
                                        | -&gt; location: https://www.e\
                                        |   xample.com</pre><p id="rfc.section.D.6.1.p.5"></p><span id="rfc.figure.u.95"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  63) location: https://www.example.com
[  2] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] (s =  52) cache-control: private
[  4] (s =  42) :status: 302
      Table size: 222</pre><p id="rfc.section.D.6.1.p.6"></p><span id="rfc.figure.u.96"></span><p>Decoded header set:</p><pre>:status: 302
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre></div>
            <div>
               <h3 id="rfc.section.D.6.2"><a href="#rfc.section.D.6.2">D.6.2</a>&nbsp;Second Response
               </h3>
               <p id="rfc.section.D.6.2.p.1">The (":status", "302") header field is evicted from the header table to free space to allow adding the (":status", "200")
                  header field, copied from the static table into the header table. The (":status", "302") header field doesn't need to be removed
                  from the reference set as it is evicted from the header table.
               </p>
               <p id="rfc.section.D.6.2.p.2"></p><span id="rfc.figure.u.97"></span><p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:21 GMT
location: https://www.example.com</pre><p id="rfc.section.D.6.2.p.3"></p><span id="rfc.figure.u.98"></span><p>Reference set:</p><pre>[  1] location: https://www.example.com
[  2] date: Mon, 21 Oct 2013 20:13:21 GMT
[  3] cache-control: private
[  4] :status: 302</pre><p id="rfc.section.D.6.2.p.4"></p><span id="rfc.figure.u.99"></span><p>Hex dump of encoded data:</p><pre>8c                                      | .</pre><p id="rfc.section.D.6.2.p.5"></p><span id="rfc.figure.u.100"></span><p>Decoding process:</p><pre>8c                                      | == Indexed - Add ==
                                        |   idx = 12
                                        | - evict: :status: 302
                                        | -&gt; :status: 200</pre><p id="rfc.section.D.6.2.p.6"></p><span id="rfc.figure.u.101"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  42) :status: 200
[  2] (s =  63) location: https://www.example.com
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] (s =  52) cache-control: private
      Table size: 222</pre><p id="rfc.section.D.6.2.p.7"></p><span id="rfc.figure.u.102"></span><p>Decoded header set:</p><pre>:status: 200
location: https://www.example.com
date: Mon, 21 Oct 2013 20:13:21 GMT
cache-control: private</pre></div>
            <div>
               <h3 id="rfc.section.D.6.3"><a href="#rfc.section.D.6.3">D.6.3</a>&nbsp;Third Response
               </h3>
               <p id="rfc.section.D.6.3.p.1">Several header fields are evicted from the header table during the processing of this header set. Before evicting a header
                  belonging to the reference set, it is emitted, by coding it twice as an Indexed Representation. The first representation removes
                  the header field from the reference set, the second one adds it again to the reference set, also emitting it.
               </p>
               <p id="rfc.section.D.6.3.p.2"></p><span id="rfc.figure.u.103"></span><p>Header set to encode:</p><pre>:status: 200
cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
location: https://www.example.com
content-encoding: gzip
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre><p id="rfc.section.D.6.3.p.3"></p><span id="rfc.figure.u.104"></span><p>Reference set:</p><pre>[  1] :status: 200
[  2] location: https://www.example.com
[  3] date: Mon, 21 Oct 2013 20:13:21 GMT
[  4] cache-control: private</pre><p id="rfc.section.D.6.3.p.4"></p><span id="rfc.figure.u.105"></span><p>Hex dump of encoded data:</p><pre>8484 4396 d07a be94 1054 d444 a820 0595 | ..C..z...T.D. ..
040b 8166 e084 a62d 1bff 5e83 9bd9 ab84 | ...f...-..^.....
8483 837b ad94 e782 1dd7 f2e6 c7b3 35df | ...{..........5.
dfcd 5b39 60d5 af27 087f 3672 c1ab 270f | ..[9`..'..6r..'.
b529 1f95 8731 6065 c003 ed4e e5b1 063d | .)...1`e...N...=
5007                                    | P.</pre><p id="rfc.section.D.6.3.p.5"></p><span id="rfc.figure.u.106"></span><p>Decoding process:</p><pre>84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; cache-control: private
43                                      | == Literal indexed ==
                                        |   Indexed name (idx = 3)
                                        |     date
96                                      |   Literal value (len = 29)
                                        |     Huffman encoded:
d07a be94 1054 d444 a820 0595 040b 8166 | .z...T.D. .....f
e084 a62d 1bff                          | ...-..
                                        |     Decoded:
                                        | Mon, 21 Oct 2013 20:13:22 \
                                        | GMT
                                        | - evict: cache-control: pr\
                                        |   ivate
                                        | -&gt; date: Mon, 21 Oct 2013 \
                                        |   20:13:22 GMT
5e                                      | == Literal indexed ==
                                        |   Indexed name (idx = 30)
                                        |     content-encoding
83                                      |   Literal value (len = 4)
                                        |     Huffman encoded:
9bd9 ab                                 | ...
                                        |     Decoded:
                                        | gzip
                                        | - evict: date: Mon, 21 Oct\
                                        |    2013 20:13:21 GMT
                                        | -&gt; content-encoding: gzip
84                                      | == Indexed - Remove ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
84                                      | == Indexed - Add ==
                                        |   idx = 4
                                        | -&gt; location: https://www.e\
                                        |   xample.com
83                                      | == Indexed - Remove ==
                                        |   idx = 3
                                        | -&gt; :status: 200
83                                      | == Indexed - Add ==
                                        |   idx = 3
                                        | -&gt; :status: 200
7b                                      | == Literal indexed ==
                                        |   Indexed name (idx = 59)
                                        |     set-cookie
ad                                      |   Literal value (len = 56)
                                        |     Huffman encoded:
94e7 821d d7f2 e6c7 b335 dfdf cd5b 3960 | .........5...[9`
d5af 2708 7f36 72c1 ab27 0fb5 291f 9587 | ..'..6r..'..)...
3160 65c0 03ed 4ee5 b106 3d50 07        | 1`e...N...=P.
                                        |     Decoded:
                                        | foo=ASDJKHQKBZXOQWEOPIUAXQ\
                                        | WEOIU; max-age=3600; versi\
                                        | on=1
                                        | - evict: location: https:/\
                                        |   /www.example.com
                                        | - evict: :status: 200
                                        | -&gt; set-cookie: foo=ASDJKHQ\
                                        |   KBZXOQWEOPIUAXQWEOIU; ma\
                                        |   x-age=3600; version=1</pre><p id="rfc.section.D.6.3.p.6"></p><span id="rfc.figure.u.107"></span><p>Header Table (after decoding):</p><pre>[  1] (s =  98) set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age\
                 =3600; version=1
[  2] (s =  52) content-encoding: gzip
[  3] (s =  65) date: Mon, 21 Oct 2013 20:13:22 GMT
      Table size: 215</pre><p id="rfc.section.D.6.3.p.7"></p><span id="rfc.figure.u.108"></span><p>Decoded header set:</p><pre>cache-control: private
date: Mon, 21 Oct 2013 20:13:22 GMT
content-encoding: gzip
location: https://www.example.com
:status: 200
set-cookie: foo=ASDJKHQKBZXOQWEOPIUAXQWEOIU; max-age=3600; version=1</pre></div>
         </div>
      </div>
      <div class="avoidbreak">
         <h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
         <p><b>Roberto Peon</b><br>Google, Inc<br>Email: <a href="mailto:fenix@google.com">fenix@google.com</a></p>
         <p><b>Hervé Ruellan</b><br>Canon CRF<br>Email: <a href="mailto:herve.ruellan@crf.canon.fr">herve.ruellan@crf.canon.fr</a></p>
      </div>
   </body>
</html>